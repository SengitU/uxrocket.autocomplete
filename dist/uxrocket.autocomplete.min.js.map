{"version":3,"sources":["uxrocket.autocomplete.js"],"names":["factory","define","amd","exports","require","jQuery","$","ux","i","rocketName","defaults","type","item","service","minLength","queryType","formdata","hidden","template","highlight","arrowSelection","arrowNavigation","cache","onReady","onSearch","onSelect","onEnter","onButtonClick","onClearCache","onUpdate","onRemove","templates","list","image","category","head","tree","events","click","keyup","input","blur","keys","codes",13,27,37,38,39,40,"return","esc","left","up","right","down","ns","prefix","rocket","data","name","wrap","classes","ready","magnify","loading","select","option","matched","selected","Autocomplete","el","options","selector","$el","this","_instance","_name","_defaults","id","terms","extend","lastTerm","init","prototype","uxrocket","addClass","utils","getClassname","hasWrapper","wrapper","setLayout","prepareContainer","prepareSource","callback","bindUIActions","setTemplate","handleClasses","classList","context","className","replace","charAt","substr","trim","removeClasses","removeClass","parent","handleWrapper","is","addIcon","after","$icon","next","startLoading","stopLoading","removeLayout","_this","Object","length","unwrap","remove","removeContainer","on","e","val","_length","onKeyup","hideContainer","onBlur","$list","preventDefault","target","cleanUp","$selected","currentTarget","siblings","end","setValue","text","unbindUIActions","off","keyCode","onVerticalArrow","find","toLowerCase","search","setTimeout","updown","direction","highlighted","show","first","$ul","setPosition","attr","css","appendTo","rgx_url","source","test","fdata","serializeForm","ajax","url","dataType","term","success","items","itemList","showResults","getStringVariable","results","haystack","isCached","apply","map","searchArray","needle","indexOf","compileTemplate","html","offset","top","offsetHeight","width","offsetWidth","minWidth","delay","hide","itemTemplate","Handlebars","compile","categoryTemplate","currentCategory","each","index","rendered","renderItem","push","RegExp","serialize","cached","undefined","clearCache","update","destroy","fn","func","str","chain","split","chainVal","window","which","autocomplete","uxrautocomplete","uxitdautocomplete","opts","filter","_opts","_uxrocket","removeData","version","settings","namespace","o","k","r","hasOwnProperty","call"],"mappings":"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","file":"uxrocket.autocomplete.min.js","sourcesContent":["/**\n * UX Rocket\n * jQuery based autocomplete\n * @author Bilal Cinarli\n * @dependency Handlebars\n */\n\n(function(factory) {\n    'use strict';\n    if(typeof define === 'function' && define.amd) {\n        // AMD. Register as an anonymous module.\n        define(['jquery'], factory);\n    } else if(typeof exports === 'object' && typeof require === 'function') {\n        // Browserify\n        factory(require('jquery'));\n    } else {\n        // Browser globals\n        factory(jQuery);\n    }\n}(function($) {\n    'use strict';\n\n    var ux, // local shorthand\n        i = 1,\n        rocketName = 'uxrAutocomplete',\n\n        defaults = {\n            type           : 'list',\n            item           : 10,\n            service        : null,\n            minLength      : 2,\n            queryType      : 'GET',\n            formdata       : null,\n            hidden         : null,\n            template       : null,\n            highlight      : true,\n            arrowSelection : false,\n            arrowNavigation: true,\n            cache          : false,\n\n            // callbacks\n            onReady      : false,\n            onSearch     : false,\n            onSelect     : false,\n            onEnter      : false,\n            onButtonClick: false,\n            onClearCache : false,\n            onUpdate     : false,\n            onRemove     : false\n        },\n        templates = {\n            list    : {\n                item: '' +\n                      '<li class=\"uxr-autocomplete-list-item\">' +\n                      '   <a {{#if url}}href=\"{{url}}\"{{/if}}>' +\n                      '       {{{name}}}' +\n                      '   </a>' +\n                      '</li>'\n            },\n            image   : {\n                item: '' +\n                      '<li class=\"uxr-autocomplete-list-item\">' +\n                      '   <a {{#if url}}href=\"{{url}}\"{{/if}}>' +\n                      '       <span class=\"item-image\"><img src=\"{{image}}\"/></span> ' +\n                      '       {{{name}}}' +\n                      '   </a>' +\n                      '</li>'\n            },\n            category: {\n                head: '' +\n                      '<li class=\"uxr-autocomplete-category\">' +\n                      '   <span class=\"uxr-autocomplete-category-head\" title=\"{{category}}\">{{category}}</span>' +\n                      '</li>',\n                item: '' +\n                      '<li class=\"uxr-autocomplete-list-item\">' +\n                      '   <a {{#if url}}href=\"{{url}}\"{{/if}}>' +\n                      '       {{{name}}}' +\n                      '   </a>' +\n                      '</li>'\n            },\n            tree    : {\n                head: '' +\n                      '<li class=\"uxr-autocomplete-category\">' +\n                      '   <span class=\"uxr-autocomplete-category-head\" title=\"{{category}}\">{{category}}</span>' +\n                      '</li>',\n                item: '' +\n                      '<li class=\"uxr-autocomplete-list-item\">' +\n                      '   <a {{#if url}}href=\"{{url}}\"{{/if}}>' +\n                      '       <span class=\"item-image\"><img src=\"{{image}}\"/></span> ' +\n                      '       {{{name}}}' +\n                      '   </a>' +\n                      '</li>'\n            }\n        },\n        events = {\n            click: 'click.' + rocketName,\n            keyup: 'keyup.' + rocketName,\n            input: 'input.' + rocketName,\n            blur : 'blur.' + rocketName\n        },\n        keys = {\n            codes : {\n                13: 'return',\n                27: 'esc',\n                37: 'left',\n                38: 'up',\n                39: 'right',\n                40: 'down'\n            },\n            return: 13,\n            esc   : 27,\n            left  : 37,\n            up    : 38,\n            right : 39,\n            down  : 40\n        },\n        ns = {\n            prefix : 'uxr-',\n            rocket : 'uxRocket',\n            data   : rocketName,\n            name   : 'autocomplete',\n            wrap   : 'uxr-plugin-wrap',\n            classes: {\n                wrap     : 'wrap',\n                ready    : 'ready',\n                magnify  : 'magnify',\n                loading  : 'loading',\n                select   : 'select',\n                category : 'category',\n                option   : 'option',\n                matched  : 'matched',\n                highlight: 'highlight',\n                selected : 'selected'\n            }\n        };\n\n    // Constructor Method\n    var Autocomplete = function(el, options, selector) {\n        var $el = $(el);\n\n        this._instance = i;\n        this._name = rocketName;\n        this._defaults = defaults;\n\n        this.el = el;\n        this.$el = $el;\n        this.id = 'uxr-autocomplete-select-' + i;\n\n        this.selector = selector;\n        this.terms = {};\n        this.options = $.extend(true, {}, defaults, options, $el.data());\n\n        i++;\n\n        this.lastTerm = 'as';\n\n        this.init();\n    };\n\n    $.extend(Autocomplete.prototype, {\n        init         : function() {\n            var uxrocket = this.$el.data(ns.rocket) || {};\n\n            // add ready class\n            this.$el.addClass(utils.getClassname('ready'));\n\n            // register plugin data to rocket\n            uxrocket[ns.data] = {hasWrapper: true, wrapper: ns.wrap, ready: utils.getClassname('ready'), selector: this.selector, options: this.options};\n            this.$el.data(ns.rocket, uxrocket);\n\n\n            // set plugin layout\n            this.setLayout();\n\n            this.prepareContainer();\n            this.prepareSource();\n\n            utils.callback(this.options.onReady);\n\n            this.bindUIActions();\n            this.setTemplate();\n        },\n        handleClasses: function() {\n            this.classList = this.$el.context.className.replace(utils.getClassname('ready'), '');\n\n            if(this.selector.charAt(0) === '.') {\n                this.classList = this.classList.replace(this.selector.substr(1), '');\n            }\n\n            this.classList += ns.wrap + ' ' + utils.getClassname('wrap') + ' ' + utils.getClassname('wrap') + '-' + this._instance;\n            this.classList = $.trim(this.classList);\n        },\n\n        removeClasses: function() {\n            this.$el.removeClass(utils.getClassname('ready'));\n            this.$el.parent().removeClass(this.classList.replace(ns.wrap, ''));\n        },\n\n        handleWrapper: function() {\n            this.$el.parent().is('.' + ns.wrap) ?\n            this.$el.parent().addClass(this.classList) :\n            this.$el.wrap('<span class=\"' + this.classList + '\"></span>');\n        },\n\n        addIcon: function() {\n            this.$el.after('<i class=\"' + utils.getClassname('magnify') + '\"></i>');\n            this.$icon = this.$el.next('.' + utils.getClassname('magnify'));\n        },\n\n        setLayout: function() {\n            this.handleClasses();\n            this.handleWrapper();\n            this.addIcon();\n        },\n\n        startLoading: function() {\n            this.$icon.addClass(utils.getClassname('loading'));\n        },\n\n        stopLoading: function() {\n            this.$icon.removeClass(utils.getClassname('loading'));\n        },\n\n        removeLayout: function() {\n            var _this = this,\n                uxrocket = _this.$el.data(ns.rocket);\n\n            // remove or reformat wrap\n            if(Object.keys && Object.keys(uxrocket).length === 1) {\n                _this.$el.unwrap();\n            }\n\n            else {\n                _this.$el.parent().removeClass(ns.wrap);\n            }\n\n            _this.$el.next('.' + utils.getClassname('magnify')).remove();\n        },\n\n        removeContainer: function() {\n            $('#' + this.id).remove();\n        },\n\n        setTemplate: function() {\n            this.template = null;\n\n            if(this.options.template === null) {\n                this.template = templates[this.options.type] || templates.list;\n            }\n            else {\n                this.template = this.options.template;\n            }\n        },\n\n        bindUIActions: function() {\n            var _this = this;\n\n            _this.$el.on(events.keyup + ' ' + events.input, function(e) {\n                var val = $(this).val(),\n                    _length = val.length;\n\n                if(_length >= _this.options.minLength) {\n                    _this.onKeyup(e);\n                }\n\n                if(_length === 0) {\n                    _this.hideContainer();\n                }\n            });\n\n            _this.$el.on(events.blur, function() {\n                _this.onBlur();\n            });\n\n            _this.$list.on(events.click, '.' + utils.getClassname('option'), function(e) {\n                e.preventDefault();\n                _this.select(e);\n            });\n\n            $('body').on('DOMNodeRemoved', function(e) {\n                if(e.target === _this.el) {\n                    _this.cleanUp();\n                }\n            });\n        },\n\n        select: function($selected) {\n            var selected = $selected instanceof jQuery ? $selected : $($selected.currentTarget);\n\n            selected.siblings().removeClass(utils.getClassname('selected')).end().addClass(utils.getClassname('selected'));\n            this.setValue(selected);\n            this.hideContainer();\n\n            utils.callback(this.options.onSelect);\n        },\n\n        setValue: function(selected) {\n            var text = selected.text().trim();\n\n            if(text === '') {\n                text = this.lastTerm;\n            }\n\n            this.$el.val(text);\n        },\n\n        unbindUIActions: function() {\n            this.$el.off('.' + rocketName);\n        },\n\n        onKeyup: function(e) {\n            if(e.keyCode === keys.up || e.keyCode === keys.down) {\n                this.onVerticalArrow(keys.codes[e.keyCode]);\n            }\n\n            else if(e.keyCode === keys.return) {\n                if(this.$list.is(':visible')) {\n                    this.select(this.$list.find('.' + utils.getClassname('highlight')));\n                }\n            }\n\n            else if(e.keyCode === keys.esc) {\n                this.hideContainer();\n            }\n\n            else {\n                this.lastTerm = this.$el.val().toLowerCase();\n                this.search();\n            }\n        },\n\n        onBlur: function() {\n            var _this = this;\n\n            setTimeout(function() {\n                _this.hideContainer();\n            }, 150);\n        },\n\n        onVerticalArrow: function(updown) {\n            var selected,\n                direction = updown === 'up' ? 'prev' : 'next',\n                highlighted = this.$list.find('.' + utils.getClassname('highlight'));\n\n            if(!this.$list.is(':visible') && this.lastTerm.length >= this.options.minLength) {\n                this.$list.show();\n            }\n\n            if(!highlighted.length) {\n                selected = this.$list.find('.' + utils.getClassname('option')).first().addClass(utils.getClassname('highlight'));\n            }\n\n            else {\n                selected = highlighted.removeClass(utils.getClassname('highlight'))[direction]().addClass(utils.getClassname('highlight'));\n            }\n\n            this.setValue(selected);\n        },\n\n        prepareContainer: function() {\n            var $ul = $('<ul></ul>');\n\n            this.setPosition($ul);\n\n            $ul.attr('id', this.id).addClass(utils.getClassname('select')).css('display', 'none').appendTo('body');\n\n            this.$list = $ul;\n        },\n\n        prepareSource: function() {\n            var _this = this,\n                rgx_url = /^(http|https|\\/|\\.\\/|\\.\\.\\/)/,\n                source = this.options.service;\n\n            this.source = source;\n\n            if(typeof source === 'string') {\n                if(!rgx_url.test(source)) {\n                    this.source = utils.getStringVariable(source);\n                }\n\n                // there will be ajax\n                else {\n                    this.source = function() {\n                        var fdata = _this.serializeForm();\n\n                        $.ajax({\n                            url     : source,\n                            dataType: 'json',\n                            type    : this.options.queryType,\n                            data    : {\n                                term    : this.lastTerm,\n                                type    : this.options.type,\n                                formdata: fdata\n                            },\n                            success : function(data) {\n                                var items = data.itemList || data;\n\n                                _this.showResults(items);\n                            }\n                        });\n                    };\n                }\n            }\n        },\n\n        search: function() {\n            var _this = this,\n                results,\n                haystack = this.source.itemList ? this.source.itemList : this.source;\n\n            this.startLoading();\n\n            if(this.isCached()) {\n                this.showResults(this.terms[this.lastTerm]);\n                return;\n            }\n\n            // ajax results or custom source function\n            if(typeof haystack === 'function') {\n                return haystack.apply(this);\n            }\n\n            // search in local source\n            else {\n                results = $.map(haystack, function(item) {\n                    if(_this.searchArray(item, _this.lastTerm)) {\n                        return item;\n                    }\n                });\n\n                this.showResults(results);\n            }\n        },\n\n        searchArray: function(item, needle) {\n            return item.name.toLowerCase().indexOf(needle) > -1;\n        },\n\n        showResults: function(results) {\n            var list = this.compileTemplate(results);\n\n            // before show results, callback the onSearch function\n            utils.callback(this.options.onSearch);\n\n            this.cache(results);\n\n            $('#' + this.id).html(list).show();\n\n            this.stopLoading();\n        },\n\n        setPosition: function($ul) {\n            var offset = this.$el.offset(),\n                top = offset.top + this.el.offsetHeight,\n                left = offset.left,\n                width = this.el.offsetWidth;\n\n            return $ul.css({top: top, left: left, minWidth: width});\n        },\n\n        hideContainer: function() {\n            $('#' + this.id).delay(100).hide();\n        },\n\n        compileTemplate: function(results) {\n            var _this = this,\n                list = [],\n                itemTemplate = Handlebars.compile(this.template.item),\n                categoryTemplate = this.template.head ? Handlebars.compile(this.template.head) : false,\n                currentCategory = '';\n\n            $.each(results, function(index, item) {\n                var rendered;\n\n                rendered = _this.renderItem(item, itemTemplate);\n\n                if((_this.options.type === 'category' || _this.options.type === 'tree') && typeof item.category !== 'undefined' && item.category !== currentCategory) {\n\n                    var category = $(categoryTemplate(item));\n\n                    category.addClass(utils.getClassname('category'))\n                        .attr('role', 'presentation');\n\n                    list.push(category);\n\n                    currentCategory = item.category;\n                }\n\n                list.push(rendered);\n            });\n\n            return list;\n        },\n\n        renderItem: function(item, template) {\n            var _this = this,\n                rendered = template(item);\n\n            if(_this.options.highlight === true) {\n                rendered = rendered.replace(\n                    new RegExp('(?![^&;]+;)(?!<[^<>]*)(' + _this.lastTerm + ')(?![^<>]*>)(?![^&;]+;)', 'gi'),\n                    '<span class=\"' + utils.getClassname('matched') + '\">$1</span>');\n            }\n\n            return $(rendered)\n                .addClass(utils.getClassname('option'))\n                .data('uxrAutocompleteItem', item)\n                .attr('role', 'presentation');\n        },\n\n        serializeForm: function() {\n            return $(this.options.formdata).serialize();\n        },\n\n        cache: function(results) {\n            // cache option set to true\n            if(this.options.cache === true) {\n                this.terms[this.lastTerm] = results;\n            }\n        },\n\n        isCached: function() {\n            var cached = false;\n\n            if(this.terms[this.lastTerm] !== undefined) {\n                cached = true;\n            }\n\n            return cached;\n        },\n\n        clearCache: function() {\n            return ux.clearCache(this.el);\n        },\n\n        update: function(options) {\n            return ux.update(this.el, options);\n        },\n\n        destroy: function() {\n            return ux.destroy(this.el);\n        },\n\n        cleanUp: function() {\n            // remove wrapper\n            $('.' + utils.getClassname('wrap') + '-' + this._instance).remove();\n\n            this.removeContainer();\n        }\n    });\n\n    var utils = {\n        callback: function(fn) {\n            // if callback string is function call it directly\n            if(typeof fn === 'function') {\n                fn.apply(this);\n            }\n\n            // if callback defined via data-attribute, call it via new Function\n            else {\n                if(fn !== false) {\n                    var func = function() {\n                        return fn;\n                    };\n                    func();\n                }\n            }\n        },\n\n        getStringVariable: function(str) {\n            var val;\n            // check if it is chained\n            if(str.indexOf('.') > -1) {\n                var chain = str.split('.'),\n                    chainVal = window[chain[0]];\n\n                for(var i = 1; i < chain.length; i++) {\n                    chainVal = chainVal[chain[i]];\n                }\n\n                val = chainVal;\n            }\n\n            else {\n                val = window[str];\n            }\n\n            return val;\n        },\n\n        getClassname: function(which) {\n            return ns.prefix + ns.name + '-' + ns.classes[which];\n        }\n    };\n\n\n    ux = $.fn.autocomplete = $.fn.uxrautocomplete = $.fn.uxitdautocomplete = $.uxrautocomplete = function(options) {\n        var selector = this.selector;\n\n        return this.each(function() {\n            if($.data(this, ns.data)) {\n                return;\n            }\n\n            // Bind the plugin and attach the instance to data\n            $.data(this, ns.data, new Autocomplete(this, options, selector));\n        });\n    };\n\n    ux.clearCache = function(el) {\n        var $el = el !== undefined ? $(el) : $('.' + utils.getClassname('ready'));\n\n        $el.each(function() {\n            var _instance = $(this).data(ns.data);\n\n            // set cache terms to empty object\n            _instance.terms = {};\n\n            utils.callback(_instance.options.onClearCache);\n        });\n    };\n\n    ux.update = function(el, options) {\n        var $el, opts;\n\n        // all elements will update according to new options\n        if(typeof options === 'undefined' && typeof el === 'object') {\n            $el = $('.' + utils.getClassname('ready'));\n            opts = el;\n        }\n        else {\n            $el = $(el);\n            opts = options;\n        }\n\n        $el.filter('input').each(function() {\n            var _this = $(this),\n                _instance = _this.data(ns.data),\n                _opts = _instance.options;\n\n            // update new options\n            _instance.options = $.extend(true, {}, _opts, opts);\n\n            // clear cache if cache set to false\n            if(!_instance.options.cache) {\n                ux.clearCache(_this);\n            }\n\n            // update template\n            _instance.setTemplate();\n\n            // use onUpdate callback from original options\n            utils.callback(_opts.onUpdate);\n        });\n    };\n\n    ux.destroy = function(el) {\n        var $el = el !== undefined ? $(el) : $('.' + utils.getClassname('ready'));\n\n        $el.filter('input').each(function() {\n            var _this = $(this),\n                _instance = _this.data(ns.data),\n                _uxrocket = _this.data(ns.rocket);\n\n            // remove ready class\n            _instance.removeClasses();\n\n            // remove plugin events\n            _instance.unbindUIActions();\n\n            // remove layout\n            _instance.removeLayout();\n\n            // remove container\n            _instance.removeContainer();\n\n            // remove plugin data\n            _this.removeData(ns.data);\n\n            // remove uxRocket registry\n            delete _uxrocket[ns.data];\n            _this.data(ns.rocket, _uxrocket);\n\n            utils.callback(_instance.options.onRemove);\n        });\n    };\n\n// version\n    ux.version = '2.0.0';\n\n// default settings\n    ux.settings = defaults;\n    ux.templates = templates;\n    ux.namespace = ns;\n}))\n;\n\n// Old IE polyfill\nObject.keys = Object.keys ||\n              function(o, k, r) {\n                  r = [];\n                  for(k in o) {\n                      r.hasOwnProperty.call(o, k) && r.push(k);\n                  }\n                  return r;\n              };"],"sourceRoot":"/source/"}