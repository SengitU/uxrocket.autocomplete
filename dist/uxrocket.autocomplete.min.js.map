<<<<<<< HEAD
{"version":3,"sources":["uxrocket.autocomplete.js"],"names":["$","ux","defaults","type","item","service","minLength","formdata","categoryTextLimit","queryType","hidden","template","highlight","arrowSelection","arrowNavigation","cache","onReady","onSelect","onButtonClick","onClearCache","onUpdate","onRemove","templates","list","wrap","image","category","head","tree","events","click","search","response","ns","rocket","data","ready","rocketWrap","icon","loading","AutoComplete","el","options","selector","$el","opts","extend","terms","setLayout","callback","bindUIActions","setTemplate","columns","_opts","context","className","replace","charAt","substr","parent","is","addClass","after","setSource","fdata","url_pattern","source","sourceFunction","test","request","term","items","itemList","map","slice","setItem","serialize","ajax","url","dataType","success","eval","matcher","RegExp","ui","autocomplete","escapeRegex","name","props","split","next","on","e","preventDefault","event","this","siblings","removeClass","open","css","width","outerWidth","focus","select","val","id","keyCode","_target","currentTarget","find","attr","window","location","_renderMenu","ul","_this","_list","currentCategory","each","index","temp","categoryHead","Handlebars","compile","push","_renderItemData","append","_create","_super","widget","menu","rendered","listItem","value","visiblename","fn","apply","func","Function","uxitdautocomplete","uxautocomplete","uxrocket","hasClass","hasWrapper","wrapper","clearCache","undefined","filter","_instance","update","_rocket","removeData","off","remove","_uxrocket","Object","keys","length","unwrap","version","settings","jQuery"],"mappings":"CAUA,SAAUA,GACN,GAAIC,IAEAC,UACIC,KAAmB,OACnBC,KAAmB,GACnBC,QAAmB,KACnBC,UAAmB,EACnBC,SAAmB,KACnBC,kBAAmB,GACnBC,UAAmB,MACnBC,OAAmB,KACnBC,SAAmB,KACnBC,WAAmB,EACnBC,gBAAmB,EACnBC,iBAAmB,EACnBC,OAAmB,EAGnBC,SAAe,EACfC,UAAe,EACfC,eAAe,EACfC,cAAe,EACfC,UAAe,EACfC,UAAe,GAGnBC,WACIC,MACIC,KAAM,YACNpB,KAAM,uJAUVqB,OACID,KAAM,YACNpB,KAAM,qNAWVsB,UACIF,KAAM,YACNG,KAAM,gKAINvB,KAAM,uJAUVwB,MACIJ,KAAM,YACNG,KAAM,gKAINvB,KAAM,sNAYdyB,QACIC,MAAU,uBACVC,OAAU,oCACVC,SAAU,uCAEdC,IACIC,OAAY,WACZC,KAAY,iBACZC,MAAY,2BACZC,WAAY,oBACZb,KAAY,0BACZc,KAAY,cACZC,QAAY,gBAGhBC,aAAe,SAASC,EAAIC,EAASC,GACrC,GAAIC,GAAM5C,EAAEyC,GACRI,EAAO7C,EAAE8C,UAAW5C,SAAUwC,EAASE,EAAIT,QAASQ,SAAYA,GAGpEE,GAAKE,SAELH,EAAIT,KAAKF,GAAGE,KAAMU,GAGlBG,UAAUJ,GAGVK,SAASJ,EAAK7B,SAGdkC,cAAcN,GAGdO,YAAYP,IAGZI,UAAY,SAASJ,GACrB,GAAIQ,GACAC,EAAQT,EAAIT,KAAKF,GAAGE,KAExBiB,GAAU,IAAMR,EAAIU,QAAQC,UAAUC,QAAQvB,GAAGG,MAAO,IAEzB,KAA5BiB,EAAMV,SAASc,OAAO,KACrBL,EAAUA,EAAQI,QAAQ,IAAMH,EAAMV,SAASe,OAAO,GAAI,IAC1DN,EAAUA,EAAQI,QAAQH,EAAMV,SAASe,OAAO,GAAK,IAAK,KAG3Dd,EAAIe,SAASC,GAAG,IAAM3B,GAAGI,YACxBO,EAAIe,SAASE,SAAS5B,GAAGT,KAAO4B,EAAU,UAG1CR,EAAIpB,KAAK,gBAAkBS,GAAGI,WAAa,IAAMJ,GAAGT,KAAO4B,EAAU,mBAGzER,EAAIkB,MAAM,aAAe7B,GAAGK,KAAO,WAGnCyB,UAAY,SAASnB,KACrB,GAAIS,OAAQT,IAAIT,KAAKF,GAAGE,MACpB6B,MAAQ,KACRC,YAAc,+BACdC,OAASb,MAAMhD,QACf8D,cAGJ,IAAIF,YAAYG,KAAKF,SAA6B,gBAAXA,QA0BnCC,eAAiB,SAASE,EAASrC,GAC/B,GAAIsC,GAAOD,EAAQC,IAGnB,IAAI1B,IAAIgB,GAAG,UAAX,CAIA,GAAGP,MAAMtC,OAASuD,IAAQjB,OAAMN,MAAO,CACnC,GAAIwB,GAAQlB,MAAMN,MAAMuB,GAAME,UAAYnB,MAAMN,MAAMuB,EAKtD,YAHAtC,GAAShC,EAAEyE,IAAIF,EAAMG,MAAM,EAAGrB,MAAMjD,MAAO,SAASA,GAChD,MAAOuE,SAAQvE,MAKF,MAAlBiD,MAAM9C,WACLyD,MAAQhE,EAAEqD,MAAM9C,UAAUqE,aAG9B5E,EAAE6E,MACEC,IAAUZ,OACVa,SAAU,OACV5E,KAAUkD,MAAM5C,UAChB0B,MACIhC,KAAUkD,MAAMlD,KAChBmE,KAAUA,EACV/D,SAAUyD,OAEdgB,QAAU,SAAS7C,GACZkB,MAAMtC,QACLsC,MAAMN,MAAMuB,GAAQnC,EACpBS,IAAIT,KAAKF,GAAGE,KAAMkB,OAGtB,IAAIkB,GAAQpC,EAAKqC,UAAYrC,CAE7BH,GAAShC,EAAEyE,IAAIF,EAAMG,MAAM,EAAGrB,MAAMjD,MAAO,SAASA,GAChD,MAAOuE,SAAQvE,eAjEyB,CACnC,gBAAX8D,UAGNA,OAASe,KAAKf,QAIlB,IAAIK,OAAQL,OAAOM,UAAYN,MAE/BC,gBAAiB,SAASE,EAASrC,GAE/B,GAAIY,IAAIgB,GAAG,UAAX,CAIA,GAAIsB,GAAU,GAAIC,QAAOnF,EAAEoF,GAAGC,aAAaC,YAAYjB,EAAQC,MAAO,IAEtEtC,GAAShC,EAAEyE,IAAIF,MAAO,SAASnE,GAC3B,MAAG8E,GAAQd,KAAKhE,EAAKmF,MACVZ,QAAQvE,GADnB,YAqDZ,MAAO+D,iBAGPjB,cAAgB,SAASN,KACzB,GAAIS,OAAQT,IAAIT,KAAKF,GAAGE,KAExB,IAA0B,mBAAhBkB,OAAMmC,OAAwC,IAAfnC,MAAMmC,MAAa,CACxD,GAAIA,OAAQnC,MAAMmC,MAAMC,MAAM,IAE9B7C,KAAI8C,KAAK,IAAMzD,GAAGK,MAAMuB,SAAS,qCAAqC8B,GAAG9D,OAAOC,MAAO,SAAS8D,GAC5FA,EAAEC,iBACFZ,KAAKO,MAAM,MAIhBnC,MAAMnC,iBAAkB,GACvB0B,IAAI8C,KAAK,IAAMzD,GAAGK,MAAMqD,GAAG9D,OAAOC,MAAO,WACrCmB,SAASI,MAAMnC,iBAIvB0B,IAAI+C,GAAG9D,OAAOE,OAAQ,SAAS+D,EAAOV,GAClCpF,EAAE+F,MAAMC,SAAS,IAAM/D,GAAGK,MAAMuB,SAAS5B,GAAGM,WAGhDK,IAAI+C,GAAG9D,OAAOG,SAAU,SAAS8D,EAAOV,GACpCpF,EAAE+F,MAAMC,SAAS,IAAM/D,GAAGM,SAAS0D,YAAYhE,GAAGM,WAGtDK,IAAIyC,cACAa,KAAW,SAASJ,EAAOV,GACvBpF,EAAE,gCAAgCiG,YAAY,gBAE9CjG,EAAE+F,MAAMV,aAAa,UAAUc,KAC3BC,MAAUpG,EAAE+F,MAAMM,aAAe,QAGzC/F,UAAW+C,MAAM/C,UACjB4D,OAAWH,UAAUnB,KACrB0D,MAAW,SAASR,EAAOV,GACnB/B,MAAMvC,iBACNgF,EAAMD,kBAGdU,OAAW,SAAST,EAAOV,GAKvB,GAJmB,MAAhB/B,MAAM3C,QACLV,EAAEqD,MAAM3C,QAAQ8F,IAAIpB,EAAGhF,KAAKqG,IAG7BpD,MAAMxC,kBAAmB,GAAyB,IAAjBiF,EAAMY,SAAwC,mBAAhBtB,GAAGhF,KAAK0E,IAAqB,CAE3F,GAAI6B,GAAU3G,EAAE,IAAM8F,EAAMc,cAAcH,IAAII,KAAK,qBAAqBC,KAAK,SAE/D,WAAXH,EACCI,OAAOb,KAAKd,EAAGhF,KAAK0E,KAGpBiC,OAAOC,SAAW5B,EAAGhF,KAAK0E,IAIlC7B,SAASI,MAAMpC,cAKvBkC,YAAc,SAASP,GACvB,GAAIyC,GAA4CzC,EAAIT,KAAjCS,EAAIT,KAAK,kBAA6B,iBAA6B,mBAClFkB,EAAQT,EAAIT,KAAKF,GAAGE,MACpBxB,IAEJ,IAAsB,OAAnB0C,EAAM1C,SACL,OAAO0C,EAAMlD,MACT,QACA,IAAK,OACDQ,EAAWW,UAAUC,IACrB,MACJ,KAAK,QACDZ,EAAWW,UAAUG,KACrB,MACJ,KAAK,WACDd,EAAWW,UAAUI,QACrB,MACJ,KAAK,OACDf,EAAWW,UAAUM,SAM7BjB,GAAW0C,EAAM1C,QAGrB0E,GAAa4B,YAAc,SAASC,EAAI3C,GACpC,GAAI4C,GAAQpB,KACRqB,KACAC,EAAkB,EAEtBrH,GAAEsH,KAAK/C,EAAO,SAASgD,EAAOnH,GAC1B,GAAIoH,EAEJ,KAAkB,YAAdnE,EAAMlD,MAAoC,QAAdkD,EAAMlD,OAA4C,mBAAlBC,GAAKsB,UAA4BtB,EAAKsB,UAAY2F,EAAiB,CAE/H,GAAII,GAAeC,WAAWC,QAAQhH,EAASgB,MAAMvB,EAErDgH,GAAMQ,KAAKH,GAEXJ,EAAkBjH,EAAKsB,SAG3B8F,EAAOL,EAAMU,gBAAgBX,EAAI9G,GAEjCgH,EAAMQ,KAAKJ,KAGfN,EAAGY,OAAOV,GAEY,IAAnBC,GACCH,EAAGrD,SAAS,mBAIpBwB,EAAa0C,QAAU,WACnB,GAAIZ,GAAQpB,IAEZoB,GAAMa,SACNb,EAAMc,SAASC,KAAK,SAAU,QAAS,sCAG3C7C,EAAawC,gBAAkB,SAASX,EAAI9G,GACxC,GAAI+H,GACAC,EAAWV,WAAWC,QAAQhH,EAASP,MAAMA,EAUjD,OARA+H,GAAWC,EAER/E,EAAMzC,aAAc,IACnBuH,EAAWC,EAAS5E,QAChB,GAAI2B,QAAO,0BAA4BnF,EAAEoF,GAAGC,aAAaC,YAAYS,KAAKzB,MAAQ,0BAA2B,MAC7G,oCAGDtE,EAAEmI,GACJtE,SAAS,gBACT1B,KAAK,uBAAwB/B,GAC7B0G,KAAK,OAAQ,kBAKtBnC,QAAU,SAASvE,GAanB,MAZyB,mBAAfA,GAAKiI,QACXjI,EAAKiI,MAAQjI,EAAKmF,MAOS,mBAArBnF,GAAKkI,cACXlI,EAAKiI,MAAQjI,EAAKkI,aAGflI,GAIP6C,SAAW,SAASsF,GAEpB,GAAiB,kBAAPA,GACNA,EAAGC,MAAMzC,UAKT,IAAGwC,KAAO,EAAO,CACb,GAAIE,GAAO,GAAIC,UAAS,UAAYH,EACpCE,MAMZxI,IAAKD,EAAEuI,GAAGI,kBAAoB3I,EAAE4I,eAAiB,SAASlG,GACtD,GAAIC,GAAWoD,KAAKpD,QAEpB,OAAOoD,MAAKuB,KAAK,WACb,GAEIjC,GAFAzC,EAAM5C,EAAE+F,MACR8C,EAAWjG,EAAIT,KAAK,eAGrBS,GAAIkG,SAAS7G,GAAGG,QAAUQ,EAAIkG,SAAS7G,GAAGI,cAI7CO,EAAIiB,SAAS5B,GAAGG,OAEhByG,EAAS5G,GAAGE,OAAS4G,YAAc,EAAMC,QAAW/G,GAAGT,KAAMY,MAASH,GAAGG,MAAOO,SAAYA,EAAUD,QAAWA,GAEjHE,EAAIT,KAAKF,GAAGC,OAAQ2G,GAEpBxD,EAAe,GAAI7C,cAAauD,KAAMrD,EAASC,OAIvD1C,GAAGgJ,WAAa,SAASxG,GACrB,GAAIG,GAAyB5C,EAAZkJ,SAAPzG,EAAqBA,EAAQ,IAAMR,GAAGG,MAEhDQ,GAAIuG,OAAO,SAAS7B,KAAK,WACrB,GAAIH,GAAQnH,EAAE+F,MACVqD,EAAYjC,EAAMhF,KAAKF,GAAGE,KAG9BiH,GAAUrG,SAEVoE,EAAMhF,KAAKF,GAAGE,KAAMiH,GAEpBnG,SAASmG,EAAUjI,iBAI3BlB,GAAGoJ,OAAS,SAAS5G,GACjB,GAAIG,GAAyB5C,EAAZkJ,SAAPzG,EAAqBA,EAAQ,IAAMR,GAAGG,MAEhDQ,GAAIuG,OAAO,SAAS7B,KAAK,WACrB,GAAIH,GAAQnH,EAAE+F,MACVqD,EAAYjC,EAAMhF,KAAKF,GAAGE,MAC1BmH,EAAUnC,EAAMhF,KAAKF,GAAGC,OAG5BiF,GAAM9B,aAAa,WAKnB8B,EAAMoC,WAAWtH,GAAGE,MAGpBiH,EAAYpJ,EAAE8C,UAAW5C,SAAUoJ,EAAQrH,GAAGE,MAAe,QAAGnC,EAAE+F,MAAM5D,QAGxEgF,EAAMhF,KAAKF,GAAGE,KAAMiH,GAEpBjC,EAAMqC,IAAI3H,OAAOC,MAAQ,IAAMD,OAAOE,OAAS,IAAMF,OAAOG,UAE5DkB,cAAciE,GAEdhE,YAAYgE,GAEZlE,SAASmG,EAAUhI,aAI3BnB,GAAGwJ,OAAS,SAAShH,GACjB,GAAIG,GAAyB5C,EAAZkJ,SAAPzG,EAAqBA,EAAQ,IAAMR,GAAGG,MAEhDQ,GAAIuG,OAAO,SAAS7B,KAAK,WACrB,GAAIH,GAAQnH,EAAE+F,MACVqD,EAAYjC,EAAMhF,KAAKF,GAAGE,MAC1BuH,EAAYvC,EAAMhF,KAAKF,GAAGC,OAG9BiF,GAAMlB,YAAYhE,GAAGG,OAGrB+E,EAAMqC,IAAI3H,OAAOC,MAAQ,IAAMD,OAAOE,OAAS,IAAMF,OAAOG,UAG5DmF,EAAMzB,KAAK,IAAMzD,GAAGK,MAAMmH,SAEvBC,EAAUzH,GAAGE,MAAM4G,aACfY,OAAOC,MAAyC,GAAjCD,OAAOC,KAAKF,GAAWG,OACrC1C,EAAM2C,SAIN3C,EAAMxD,SAASsC,YAAYhE,GAAGT,OAKtC2F,EAAMoC,WAAWtH,GAAGE,YAGbuH,GAAUzH,GAAGE,MACpBgF,EAAMhF,KAAKF,GAAGC,OAAQwH,GAGtBvC,EAAM9B,aAAa,WAEnBpC,SAASmG,EAAU/H,aAK3BpB,GAAG8J,QAAU,QAGb9J,GAAG+J,SAAW9J,UACf+J","file":"uxrocket.autocomplete.min.js","sourcesContent":["/**\n * UX Rocket\n * jQuery based accordion\n * @author Bilal Cinarli\n * @dependency jQueryUI Autocomplete\n * @dependency Handlebars\n * @dependency UX Rocket Clear\n */\n\n;\n(function($) {\n    var ux, // local shorthand\n\n        defaults = {\n            type             : \"list\",\n            item             : 10,\n            service          : null,\n            minLength        : 2,\n            formdata         : null,\n            categoryTextLimit: 25,\n            queryType        : 'GET',\n            hidden           : null,\n            template         : null,\n            highlight        : true,\n            arrowSelection   : false,\n            arrowNavigation  : true,\n            cache            : false,\n\n            // callbacks\n            onReady      : false,\n            onSelect     : false,\n            onButtonClick: false,\n            onClearCache : false,\n            onUpdate     : false,\n            onRemove     : false\n        },\n\n        templates = {\n            list    : {\n                wrap: '<ul></ul>',\n                item: '' +\n                      '<li>' +\n                      '   <a {{#if url}}href=\"{{url}}\"{{/if}}>' +\n                      '       {{{name}}}' +\n                      '       {{#if title}}' +\n                      '       <br /><em>{{substr title 50}}</em>' +\n                      '       {{/if}}' +\n                      '   </a>' +\n                      '</li>'\n            },\n            image   : {\n                wrap: '<ul></ul>',\n                item: '' +\n                      '<li>' +\n                      '   <a {{#if url}}href=\"{{url}}\"{{/if}}>' +\n                      '       <span class=\"item-image\"><img src=\"{{image}}\"/></span> ' +\n                      '       {{{name}}}' +\n                      '       {{#if title}}' +\n                      '       <br /><em>{{substr title 50}}</em>' +\n                      '       {{/if}}' +\n                      '   </a>' +\n                      '</li>'\n            },\n            category: {\n                wrap: '<ul></ul>',\n                head: '' +\n                      '<li class=\"uxitd-autocomplete-category ui-autocomplete-category\">' +\n                      '   <span class=\"uxitd-category-head\" title=\"{{category}}\">{{substr category 25}}</span>' +\n                      '</li>',\n                item: '' +\n                      '<li>' +\n                      '   <a {{#if url}}href=\"{{url}}\"{{/if}}>' +\n                      '       {{{name}}}' +\n                      '       {{#if title}}' +\n                      '       <br /><em>{{substr title 50}}</em>' +\n                      '       {{/if}}' +\n                      '   </a>' +\n                      '</li>'\n            },\n            tree    : {\n                wrap: '<ul></ul>',\n                head: '' +\n                      '<li class=\"uxitd-autocomplete-category ui-autocomplete-category\">' +\n                      '   <span class=\"uxitd-category-head\" title=\"{{category}}\">{{substr category 25}}</span>' +\n                      '</li>',\n                item: '' +\n                      '<li>' +\n                      '   <a {{#if url}}href=\"{{url}}\"{{/if}}>' +\n                      '       <span class=\"item-image\"><img src=\"{{image}}\"/></span> ' +\n                      '       {{{name}}}' +\n                      '       {{#if title}}' +\n                      '       <br /><em>{{substr title 50}}</em>' +\n                      '       {{/if}}' +\n                      '   </a>' +\n                      '</li>'\n            }\n        },\n        events = {\n            click   : 'click.uxAutocomplete',\n            search  : 'autocompletesearch.uxAutocomplete',\n            response: 'autocompleteresponse.uxAutocomplete'\n        },\n        ns = {\n            rocket    : 'uxRocket',\n            data      : 'uxAutocomplete',\n            ready     : 'uxitd-autocomplete-ready',\n            rocketWrap: 'uxitd-plugin-wrap',\n            wrap      : 'uxitd-autocomplete-wrap',\n            icon      : 'icon-search',\n            loading   : 'icon-loading'\n        };\n\n    var AutoComplete = function(el, options, selector) {\n        var $el = $(el),\n            opts = $.extend({}, defaults, options, $el.data(), {'selector': selector});\n\n        // terms object for caching\n        opts.terms = {};\n\n        $el.data(ns.data, opts);\n\n        // set element layout\n        setLayout($el);\n\n        // call Ready Callback\n        callback(opts.onReady);\n\n        // bind actions\n        bindUIActions($el);\n\n        // set template actions\n        setTemplate($el);\n    };\n\n    var setLayout = function($el) {\n        var columns,\n            _opts = $el.data(ns.data);\n\n        columns = ' ' + $el.context.className.replace(ns.ready, '');\n\n        if(_opts.selector.charAt(0) == '.') {\n            columns = columns.replace(' ' + _opts.selector.substr(1), '');\n            columns = columns.replace(_opts.selector.substr(1) + ' ', '');\n        }\n\n        if($el.parent().is('.' + ns.rocketWrap)) {\n            $el.parent().addClass(ns.wrap + columns + ' group');\n        }\n        else {\n            $el.wrap('<span class=\"' + ns.rocketWrap + ' ' + ns.wrap + columns + ' group\"></span>');\n        }\n\n        $el.after('<i class=\"' + ns.icon + '\"></i>');\n    };\n\n    var setSource = function($el) {\n        var _opts = $el.data(ns.data),\n            fdata = null,\n            url_pattern = /^(http|https|\\/|\\.\\/|\\.\\.\\/)/,\n            source = _opts.service,\n            sourceFunction;\n\n\n        if(!url_pattern.test(source) || typeof source === \"object\") {\n            if(typeof source === \"string\") {\n                // we get source from \"data-service\" attribute,\n                // so we need to change its format to js array\n                source = eval(source);\n            }\n            // in older versions the js array or json object should\n            // encapsulated with \"itemList\" node.\n            var items = source.itemList || source;\n\n            sourceFunction = function(request, response) {\n                // check if element is active or not : fix for IE\n                if(!$el.is(':focus')) {\n                    return;\n                }\n\n                var matcher = new RegExp($.ui.autocomplete.escapeRegex(request.term), \"i\");\n\n                response($.map(items, function(item) {\n                    if(matcher.test(item.name)) {\n                        return setItem(item);\n                    }\n                }));\n            };\n        }\n        else {\n            sourceFunction = function(request, response) {\n                var term = request.term;\n\n                // check if element is active or not : fix for IE\n                if(!$el.is(':focus')) {\n                    return;\n                }\n\n                if(_opts.cache && term in _opts.terms) {\n                    var items = _opts.terms[term].itemList || _opts.terms[term];\n\n                    response($.map(items.slice(0, _opts.item), function(item) {\n                        return setItem(item);\n                    }));\n                    return;\n                }\n\n                if(_opts.formdata != null) {\n                    fdata = $(_opts.formdata).serialize();\n                }\n\n                $.ajax({\n                    url     : source,\n                    dataType: 'json',\n                    type    : _opts.queryType,\n                    data    : {\n                        type    : _opts.type,\n                        term    : term,\n                        formdata: fdata\n                    },\n                    success : function(data) {\n                        if(_opts.cache) {\n                            _opts.terms[term] = data;\n                            $el.data(ns.data, _opts);\n                        }\n\n                        var items = data.itemList || data;\n\n                        response($.map(items.slice(0, _opts.item), function(item) {\n                            return setItem(item);\n                        }));\n                    }\n                });\n            };\n        }\n\n        return sourceFunction;\n    };\n\n    var bindUIActions = function($el) {\n        var _opts = $el.data(ns.data);\n\n        if(typeof _opts.props !== 'undefined' && _opts.props != '') {\n            var props = _opts.props.split(':');\n\n            $el.next('.' + ns.icon).addClass('uxitd-autocomplete-icon-clickable').on(events.click, function(e) {\n                e.preventDefault();\n                eval(props[1]);\n            });\n        }\n\n        if(_opts.onButtonClick !== false) {\n            $el.next('.' + ns.icon).on(events.click, function() {\n                callback(_opts.onButtonClick);\n            });\n        }\n\n        $el.on(events.search, function(event, ui) {\n            $(this).siblings('.' + ns.icon).addClass(ns.loading);\n        });\n\n        $el.on(events.response, function(event, ui) {\n            $(this).siblings('.' + ns.loading).removeClass(ns.loading);\n        });\n\n        $el.autocomplete({\n            open     : function(event, ui) {\n                $(\".uxitd-autocomplete-category\").removeClass('ui-menu-item');\n\n                $(this).autocomplete(\"widget\").css({\n                    \"width\": ($(this).outerWidth() + \"px\")\n                });\n            },\n            minLength: _opts.minLength,\n            source   : setSource($el),\n            focus    : function(event, ui) {\n                if(!_opts.arrowNavigation) {\n                    event.preventDefault();\n                }\n            },\n            select   : function(event, ui) {\n                if(_opts.hidden != null) {\n                    $(_opts.hidden).val(ui.item.id);\n                }\n\n                if(_opts.arrowSelection === true && event.keyCode == 13 && typeof ui.item.url !== 'undefined') {\n                    // check if target is blank or not\n                    var _target = $(\"#\" + event.currentTarget.id).find(\".ui-state-focus a\").attr(\"target\");\n\n                    if(_target == '_blank') {\n                        window.open(ui.item.url);\n                    }\n                    else {\n                        window.location = ui.item.url;\n                    }\n                }\n\n                callback(_opts.onSelect);\n            }\n        });\n    };\n\n    var setTemplate = function($el) {\n        var autocomplete = $el.data(\"uiAutocomplete\") ? $el.data(\"uiAutocomplete\") : $el.data(\"ui-autocomplete\"),\n            _opts = $el.data(ns.data),\n            template = {};\n\n        if(_opts.template === null) {\n            switch(_opts.type) {\n                default:\n                case 'list':\n                    template = templates.list;\n                    break;\n                case 'image':\n                    template = templates.image;\n                    break;\n                case 'category':\n                    template = templates.category;\n                    break;\n                case 'tree':\n                    template = templates.tree;\n                    break;\n            }\n        }\n\n        else {\n            template = _opts.template;\n        }\n\n        autocomplete._renderMenu = function(ul, items) {\n            var _this = this,\n                _list = [],\n                currentCategory = \"\";\n\n            $.each(items, function(index, item) {\n                var temp;\n\n                if((_opts.type == 'category' || _opts.type == 'tree') && typeof item.category !== 'undefined' && item.category != currentCategory) {\n\n                    var categoryHead = Handlebars.compile(template.head)(item);\n\n                    _list.push(categoryHead);\n\n                    currentCategory = item.category;\n                }\n\n                temp = _this._renderItemData(ul, item);\n\n                _list.push(temp);\n            });\n\n            ul.append(_list);\n\n            if(currentCategory != \"\") {\n                ul.addClass('uxitd-category');\n            }\n        };\n\n        autocomplete._create = function() {\n            var _this = this;\n\n            _this._super();\n            _this.widget().menu(\"option\", \"items\", \"> :not(.ui-autocomplete-category)\");\n        };\n\n        autocomplete._renderItemData = function(ul, item) {\n            var rendered,\n                listItem = Handlebars.compile(template.item)(item);\n\n            rendered = listItem;\n\n            if(_opts.highlight === true) {\n                rendered = listItem.replace(\n                    new RegExp(\"(?![^&;]+;)(?!<[^<>]*)(\" + $.ui.autocomplete.escapeRegex(this.term) + \")(?![^<>]*>)(?![^&;]+;)\", \"gi\"),\n                    '<span class=\"matched\">$1</span>');\n            }\n\n            return $(rendered)\n                .addClass('ui-menu-item')\n                .data(\"ui-autocomplete-item\", item)\n                .attr('role', 'presentation');\n        };\n    };\n\n    // fallback for 0.x.x versions\n    var setItem = function(item) {\n        if(typeof item.value === 'undefined') {\n            item.value = item.name;\n        }\n\n        /**\n         * Fallback for old data json format\n         * @deprecated visiblename\n         */\n        if(typeof item.visiblename !== 'undefined') {\n            item.value = item.visiblename;\n        }\n\n        return item;\n    };\n\n    // global callback\n    var callback = function(fn) {\n        // if callback string is function call it directly\n        if(typeof fn === 'function') {\n            fn.apply(this);\n        }\n\n        // if callback defined via data-attribute, call it via new Function\n        else {\n            if(fn !== false) {\n                var func = new Function('return ' + fn);\n                func();\n            }\n        }\n    };\n\n    // jquery bindings\n    ux = $.fn.uxitdautocomplete = $.uxautocomplete = function(options) {\n        var selector = this.selector;\n\n        return this.each(function() {\n            var $el = $(this),\n                uxrocket = $el.data('uxRocket') || {},\n                autocomplete;\n\n            if($el.hasClass(ns.ready) || $el.hasClass(ns.rocketWrap)) {\n                return;\n            }\n\n            $el.addClass(ns.ready);\n\n            uxrocket[ns.data] = {'hasWrapper': true, 'wrapper': ns.wrap, 'ready': ns.ready, 'selector': selector, 'options': options};\n\n            $el.data(ns.rocket, uxrocket);\n\n            autocomplete = new AutoComplete(this, options, selector);\n        });\n    };\n\n    ux.clearCache = function(el) {\n        var $el = el !== undefined ? $(el) : $(\".\" + ns.ready);\n\n        $el.filter('input').each(function() {\n            var _this = $(this),\n                _instance = _this.data(ns.data);\n\n            // set cache terms to empty object\n            _instance.terms = {};\n\n            _this.data(ns.data, _instance);\n\n            callback(_instance.onClearCache);\n        });\n    };\n\n    ux.update = function(el) {\n        var $el = el !== undefined ? $(el) : $(\".\" + ns.ready);\n\n        $el.filter('input').each(function() {\n            var _this = $(this),\n                _instance = _this.data(ns.data),\n                _rocket = _this.data(ns.rocket);\n\n            // first remove jQuery UI Autocomplete\n            _this.autocomplete('destroy');\n\n\n            // remove previous instance data\n            // since we are removing the rocket data no need to clear cache separately\n            _this.removeData(ns.data);\n\n            // add new options\n            _instance = $.extend({}, defaults, _rocket[ns.data]['options'], $(this).data());\n\n            // register new instance data\n            _this.data(ns.data, _instance);\n\n            _this.off(events.click + ' ' + events.search + ' ' + events.response);\n\n            bindUIActions(_this);\n\n            setTemplate(_this);\n\n            callback(_instance.onUpdate);\n        });\n    };\n\n    ux.remove = function(el) {\n        var $el = el !== undefined ? $(el) : $(\".\" + ns.ready);\n\n        $el.filter('input').each(function() {\n            var _this = $(this),\n                _instance = _this.data(ns.data),\n                _uxrocket = _this.data(ns.rocket);\n\n            // remove ready class\n            _this.removeClass(ns.ready);\n\n            // remove plugin events\n            _this.off(events.click + ' ' + events.search + ' ' + events.response);\n\n            // remove icon and wrapper\n            _this.next('.' + ns.icon).remove();\n\n            if(_uxrocket[ns.data].hasWrapper) {\n                if(Object.keys && Object.keys(_uxrocket).length == 1) {\n                    _this.unwrap();\n                }\n\n                else {\n                    _this.parent().removeClass(ns.wrap);\n                }\n            }\n\n            // remove plugin data\n            _this.removeData(ns.data);\n\n            // remove uxRocket registry\n            delete _uxrocket[ns.data];\n            _this.data(ns.rocket, _uxrocket);\n\n            // remove jQueryUI\n            _this.autocomplete('destroy');\n\n            callback(_instance.onRemove);\n        });\n    };\n\n    // version\n    ux.version = '1.8.1';\n\n    // settings\n    ux.settings = defaults;\n})(jQuery);\n"],"sourceRoot":"/source/"}
=======
{"version":3,"sources":["uxrocket.autocomplete.js"],"names":["factory","define","amd","exports","require","jQuery","$","ux","i","rocketName","defaults","type","item","service","minLength","queryType","formdata","hidden","template","highlight","arrowSelection","arrowNavigation","cache","onReady","onSearch","onSelect","onEnter","onButtonClick","onClearCache","onUpdate","onRemove","templates","list","image","category","head","tree","events","click","keyup","blur","keys","codes",13,27,37,38,39,40,"return","esc","left","up","right","down","ns","prefix","rocket","data","name","wrap","classes","ready","magnify","loading","select","option","matched","selected","Autocomplete","el","options","selector","$el","this","_instance","_name","_defaults","id","terms","extend","lastTerm","init","prototype","uxrocket","addClass","utils","getClassname","hasWrapper","wrapper","setLayout","prepareContainer","prepareSource","callback","bindUIActions","setTemplate","handleClasses","classList","context","className","replace","charAt","substr","trim","removeClasses","removeClass","parent","handleWrapper","is","addIcon","after","$icon","next","startLoading","stopLoading","removeLayout","_this","Object","length","unwrap","remove","on","e","val","_length","onKeyup","hideContainer","onBlur","$list","preventDefault","$selected","currentTarget","siblings","end","setValue","text","unbindUIActions","off","keyCode","onVerticalArrow","find","toLowerCase","search","setTimeout","updown","direction","highlighted","show","first","$ul","setPosition","attr","css","appendTo","rgx_url","source","test","fdata","serializeForm","ajax","url","dataType","term","success","items","itemList","showResults","getStringVariable","results","haystack","isCached","apply","map","searchArray","needle","indexOf","compileTemplate","html","offset","top","offsetHeight","width","offsetWidth","minWidth","delay","hide","itemTemplate","Handlebars","compile","categoryTemplate","currentCategory","each","index","rendered","renderItem","push","RegExp","serialize","cached","undefined","clearCache","update","destroy","fn","func","str","chain","split","chainVal","window","which","uxrautocomplete","uxitdautocomplete","filter","_uxrocket","removeData","version","settings","namespace","o","k","r","hasOwnProperty","call"],"mappings":"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","file":"uxrocket.autocomplete.min.js","sourcesContent":["/**\n * UX Rocket\n * jQuery based autocomplete\n * @author Bilal Cinarli\n * @dependency Handlebars\n */\n\n(function(factory) {\n    'use strict';\n    if(typeof define === 'function' && define.amd) {\n        // AMD. Register as an anonymous module.\n        define(['jquery'], factory);\n    } else if(typeof exports === 'object' && typeof require === 'function') {\n        // Browserify\n        factory(require('jquery'));\n    } else {\n        // Browser globals\n        factory(jQuery);\n    }\n}(function($) {\n    'use strict';\n\n    var ux, // local shorthand\n        i = 1,\n        rocketName = 'uxrAutocomplete',\n\n        defaults = {\n            type           : 'list',\n            item           : 10,\n            service        : null,\n            minLength      : 2,\n            queryType      : 'GET',\n            formdata       : null,\n            hidden         : null,\n            template       : null,\n            highlight      : true,\n            arrowSelection : false,\n            arrowNavigation: true,\n            cache          : false,\n\n            // callbacks\n            onReady      : false,\n            onSearch     : false,\n            onSelect     : false,\n            onEnter      : false,\n            onButtonClick: false,\n            onClearCache : false,\n            onUpdate     : false,\n            onRemove     : false\n        },\n        templates = {\n            list    : {\n                item: '' +\n                      '<li class=\"uxr-autocomplete-list-item\">' +\n                      '   <a {{#if url}}href=\"{{url}}\"{{/if}}>' +\n                      '       {{{name}}}' +\n                      '       {{#if title}}' +\n                      '       <br /><em>{{substr title 50}}</em>' +\n                      '       {{/if}}' +\n                      '   </a>' +\n                      '</li>'\n            },\n            image   : {\n                item: '' +\n                      '<li class=\"uxr-autocomplete-list-item\">' +\n                      '   <a {{#if url}}href=\"{{url}}\"{{/if}}>' +\n                      '       <span class=\"item-image\"><img src=\"{{image}}\"/></span> ' +\n                      '       {{{name}}}' +\n                      '       {{#if title}}' +\n                      '       <br /><em>{{substr title 50}}</em>' +\n                      '       {{/if}}' +\n                      '   </a>' +\n                      '</li>'\n            },\n            category: {\n                head: '' +\n                      '<li class=\"uxr-autocomplete-category\">' +\n                      '   <span class=\"uxr-autocomplete-category-head\" title=\"{{category}}\">{{substr category 25}}</span>' +\n                      '</li>',\n                item: '' +\n                      '<li class=\"uxr-autocomplete-list-item\">' +\n                      '   <a {{#if url}}href=\"{{url}}\"{{/if}}>' +\n                      '       {{{name}}}' +\n                      '   </a>' +\n                      '</li>'\n            },\n            tree    : {\n                head: '' +\n                      '<li class=\"uxr-autocomplete-category\">' +\n                      '   <span class=\"uxr-autocomplete-category-head\" title=\"{{category}}\">{{substr category 25}}</span>' +\n                      '</li>',\n                item: '' +\n                      '<li class=\"uxr-autocomplete-list-item\">' +\n                      '   <a {{#if url}}href=\"{{url}}\"{{/if}}>' +\n                      '       <span class=\"item-image\"><img src=\"{{image}}\"/></span> ' +\n                      '       {{{name}}}' +\n                      '   </a>' +\n                      '</li>'\n            }\n        },\n        events = {\n            click: 'click.' + rocketName,\n            keyup: 'keyup.' + rocketName,\n            blur : 'blur.' + rocketName\n        },\n        keys = {\n            codes : {\n                13: 'return',\n                27: 'esc',\n                37: 'left',\n                38: 'up',\n                39: 'right',\n                40: 'down'\n            },\n            return: 13,\n            esc   : 27,\n            left  : 37,\n            up    : 38,\n            right : 39,\n            down  : 40\n        },\n        ns = {\n            prefix : 'uxr-',\n            rocket : 'uxRocket',\n            data   : rocketName,\n            name   : 'autocomplete',\n            wrap   : 'uxr-plugin-wrap',\n            classes: {\n                wrap     : 'wrap',\n                ready    : 'ready',\n                magnify  : 'magnify',\n                loading  : 'loading',\n                select   : 'select',\n                category : 'category',\n                option   : 'option',\n                matched  : 'matched',\n                highlight: 'highlight',\n                selected : 'selected'\n            }\n        };\n\n    // Constructor Method\n    var Autocomplete = function(el, options, selector) {\n        var $el = $(el);\n\n        this._instance = i;\n        this._name = rocketName;\n        this._defaults = defaults;\n\n        this.el = el;\n        this.$el = $el;\n        this.id = 'uxr-autocomplete-select-' + i;\n\n        this.selector = selector;\n        this.terms = {};\n        this.options = $.extend(true, {}, defaults, options, $el.data());\n\n        i++;\n\n        this.lastTerm = 'as';\n\n        this.init();\n    };\n\n    $.extend(Autocomplete.prototype, {\n        init         : function() {\n            var uxrocket = this.$el.data(ns.rocket) || {};\n\n            // add ready class\n            this.$el.addClass(utils.getClassname('ready'));\n\n            // register plugin data to rocket\n            uxrocket[ns.data] = {hasWrapper: true, wrapper: ns.wrap, ready: utils.getClassname('ready'), selector: this.selector, options: this.options};\n            this.$el.data(ns.rocket, uxrocket);\n\n\n            // set plugin layout\n            this.setLayout();\n\n            this.prepareContainer();\n            this.prepareSource();\n\n            utils.callback(this.options.onReady);\n\n            this.bindUIActions();\n            this.setTemplate();\n        },\n        handleClasses: function() {\n            this.classList = this.$el.context.className.replace(utils.getClassname('ready'), '');\n\n            if(this.selector.charAt(0) === '.') {\n                this.classList = this.classList.replace(this.selector.substr(1), '');\n            }\n\n            this.classList += ns.wrap + ' ' + utils.getClassname('wrap');\n            this.classList = $.trim(this.classList);\n        },\n\n        removeClasses: function() {\n            this.$el.removeClass(utils.getClassname('ready'));\n            this.$el.parent().removeClass(this.classList.replace(ns.wrap, ''));\n        },\n\n        handleWrapper: function() {\n            this.$el.parent().is('.' + ns.wrap) ?\n            this.$el.parent().addClass(this.classList) :\n            this.$el.wrap('<span class=\"' + this.classList + '\"></span>');\n        },\n\n        addIcon: function() {\n            this.$el.after('<i class=\"' + utils.getClassname('magnify') + '\"></i>');\n            this.$icon = this.$el.next('.' + utils.getClassname('magnify'));\n        },\n\n        setLayout: function() {\n            this.handleClasses();\n            this.handleWrapper();\n            this.addIcon();\n        },\n\n        startLoading: function() {\n            this.$icon.addClass(utils.getClassname('loading'));\n        },\n\n        stopLoading: function() {\n            this.$icon.removeClass(utils.getClassname('loading'));\n        },\n\n        removeLayout: function() {\n            var _this = this,\n                uxrocket = _this.$el.data(ns.rocket);\n\n            // remove or reformat wrap\n            if(Object.keys && Object.keys(uxrocket).length === 1) {\n                _this.$el.unwrap();\n            }\n\n            else {\n                _this.$el.parent().removeClass(ns.wrap);\n            }\n\n            _this.$el.next('.' + utils.getClassname('magnify')).remove();\n        },\n\n        setTemplate: function() {\n            this.template = null;\n\n            if(this.options.template === null) {\n                this.template = templates[this.options.type] || templates.list;\n            }\n            else {\n                this.template = this.options.template;\n            }\n        },\n\n        bindUIActions: function() {\n            var _this = this;\n\n            _this.$el.on(events.keyup, function(e) {\n                var val = $(this).val(),\n                    _length = val.length;\n\n                if(_length >= _this.options.minLength) {\n                    _this.onKeyup(e);\n                }\n\n                if(_length === 0) {\n                    _this.hideContainer();\n                }\n            });\n\n            _this.$el.on(events.blur, function() {\n                _this.onBlur();\n            });\n\n            _this.$list.on(events.click, '.' + utils.getClassname('option'), function(e) {\n                e.preventDefault();\n                _this.select(e);\n            });\n        },\n\n        select: function($selected) {\n            var selected = $selected instanceof jQuery ? $selected : $($selected.currentTarget);\n\n            selected.siblings().removeClass(utils.getClassname('selected')).end().addClass(utils.getClassname('selected'));\n            this.setValue(selected);\n            this.hideContainer();\n\n            utils.callback(this.options.onSelect);\n        },\n\n        setValue: function(selected) {\n            var text = selected.text().trim();\n\n            if(text === '') {\n                text = this.lastTerm;\n            }\n\n            this.$el.val(text);\n        },\n\n        unbindUIActions: function() {\n            this.$el.off('.' + rocketName);\n        },\n\n        onKeyup: function(e) {\n            var _this = this;\n\n            if(e.keyCode === keys.up || e.keyCode === keys.down) {\n                this.onVerticalArrow(keys.codes[e.keyCode]);\n            }\n\n            else if(e.keyCode === keys.return) {\n                if(this.$list.is(':visible')) {\n                    this.select(this.$list.find('.' + utils.getClassname('highlight')));\n                }\n            }\n\n            else if(e.keyCode === keys.esc) {\n                this.hideContainer();\n            }\n\n            else {\n                this.lastTerm = this.$el.val().toLowerCase();\n                this.search();\n            }\n        },\n\n        onBlur: function() {\n            var _this = this;\n\n            setTimeout(function(){\n                _this.hideContainer();\n            }, 150);\n        },\n\n        onVerticalArrow: function(updown) {\n            var selected,\n                direction = updown === 'up' ? 'prev' : 'next',\n                highlighted = this.$list.find('.' + utils.getClassname('highlight'));\n\n            if(!this.$list.is(':visible') && this.lastTerm.length >= this.options.minLength) {\n                this.$list.show();\n            }\n\n            if(!highlighted.length) {\n                selected = this.$list.find('.' + utils.getClassname('option')).first().addClass(utils.getClassname('highlight'));\n            }\n\n            else {\n                selected = highlighted.removeClass(utils.getClassname('highlight'))[direction]().addClass(utils.getClassname('highlight'));\n            }\n\n            this.setValue(selected);\n        },\n\n        prepareContainer: function() {\n            var $ul = $('<ul></ul>');\n\n            this.setPosition($ul);\n\n            $ul.attr('id', this.id).addClass(utils.getClassname('select')).css('display', 'none').appendTo('body');\n\n            this.$list = $ul;\n        },\n\n        prepareSource: function() {\n            var _this = this,\n                rgx_url = /^(http|https|\\/|\\.\\/|\\.\\.\\/)/,\n                source = this.options.service;\n\n            this.source = source;\n\n            if(typeof source === 'string') {\n                if(!rgx_url.test(source)) {\n                    this.source = utils.getStringVariable(source);\n                }\n\n                // there will be ajax\n                else {\n                    this.source = function() {\n                        var fdata = _this.serializeForm();\n\n                        $.ajax({\n                            url     : source,\n                            dataType: 'json',\n                            type    : this.options.queryType,\n                            data    : {\n                                term    : this.lastTerm,\n                                type    : this.options.type,\n                                formdata: fdata\n                            },\n                            success : function(data) {\n                                var items = data.itemList || data;\n\n                                _this.showResults(items);\n                            }\n                        });\n                    };\n                }\n            }\n        },\n\n        search: function() {\n            var _this = this,\n                results,\n                haystack = this.source.itemList ? this.source.itemList : this.source;\n\n            this.startLoading();\n\n            if(this.isCached()) {\n                this.showResults(this.terms[this.lastTerm]);\n                return;\n            }\n\n            // ajax results or custom source function\n            if(typeof haystack === 'function') {\n                return haystack.apply(this);\n            }\n\n            // search in local source\n            else {\n                results = $.map(haystack, function(item) {\n                    if(_this.searchArray(item, _this.lastTerm)) {\n                        return item;\n                    }\n                });\n\n                this.showResults(results);\n            }\n        },\n\n        searchArray: function(item, needle) {\n            return item.name.toLowerCase().indexOf(needle) > -1;\n        },\n\n        showResults: function(results) {\n            var list = this.compileTemplate(results);\n\n            // before show results, callback the onSearch function\n            utils.callback(this.options.onSearch);\n\n            this.cache(results);\n\n            $('#' + this.id).html(list).show();\n\n            this.stopLoading();\n        },\n\n        setPosition: function($ul) {\n            var offset = this.$el.offset(),\n                top = offset.top + this.el.offsetHeight,\n                left = offset.left,\n                width = this.el.offsetWidth;\n\n            return $ul.css({top: top, left: left, minWidth: width});\n        },\n\n        hideContainer: function() {\n            $('#' + this.id).delay(100).hide();\n        },\n\n        compileTemplate: function(results) {\n            var _this = this,\n                list = [],\n                itemTemplate = Handlebars.compile(this.template.item),\n                categoryTemplate = this.template.head ? Handlebars.compile(this.template.head) : false,\n                currentCategory = '';\n\n            $.each(results, function(index, item) {\n                var rendered;\n\n                rendered = _this.renderItem(item, itemTemplate);\n\n                if((_this.options.type === 'category' || _this.options.type === 'tree') && typeof item.category !== 'undefined' && item.category !== currentCategory) {\n\n                    var category = $(categoryTemplate(item));\n\n                    category.addClass(utils.getClassname('category'))\n                        .attr('role', 'presentation');\n\n                    list.push(category);\n\n                    currentCategory = item.category;\n                }\n\n                list.push(rendered);\n            });\n\n            return list;\n        },\n\n        renderItem: function(item, template) {\n            var _this = this,\n                rendered = template(item);\n\n            if(_this.options.highlight === true) {\n                rendered = rendered.replace(\n                    new RegExp('(?![^&;]+;)(?!<[^<>]*)(' + _this.lastTerm + ')(?![^<>]*>)(?![^&;]+;)', 'gi'),\n                    '<span class=\"' + utils.getClassname('matched') + '\">$1</span>');\n            }\n\n            return $(rendered)\n                .addClass(utils.getClassname('option'))\n                .data('uxrAutocompleteItem', item)\n                .attr('role', 'presentation');\n        },\n\n        serializeForm: function() {\n            return $(this.options.formdata).serialize();\n        },\n\n        cache: function(results) {\n            // cache option set to true\n            if(this.options.cache === true) {\n                this.terms[this.lastTerm] = results;\n            }\n        },\n\n        isCached: function() {\n            var cached = false;\n\n            if(this.terms[this.lastTerm] !== undefined) {\n                cached = true;\n            }\n\n            return cached;\n        },\n\n        clearCache: function() {\n            return ux.clearCache(this.el);\n        },\n\n        update: function() {\n            return ux.update(this.el);\n        },\n\n        destroy: function() {\n            return ux.destroy(this.el);\n        }\n    });\n\n    var utils = {\n        callback: function(fn) {\n            // if callback string is function call it directly\n            if(typeof fn === 'function') {\n                fn.apply(this);\n            }\n\n            // if callback defined via data-attribute, call it via new Function\n            else {\n                if(fn !== false) {\n                    var func = function() {\n                        return fn;\n                    };\n                    func();\n                }\n            }\n        },\n\n        getStringVariable: function(str) {\n            var val;\n            // check if it is chained\n            if(str.indexOf('.') > -1) {\n                var chain = str.split('.'),\n                    chainVal = window[chain[0]];\n\n                for(var i = 1; i < chain.length; i++) {\n                    chainVal = chainVal[chain[i]];\n                }\n\n                val = chainVal;\n            }\n\n            else {\n                val = window[str];\n            }\n\n            return val;\n        },\n\n        getClassname: function(which) {\n            return ns.prefix + ns.name + '-' + ns.classes[which];\n        }\n    };\n\n\n    ux = $.fn.uxrautocomplete = $.fn.uxitdautocomplete = $.uxrautocomplete = function(options) {\n        var selector = this.selector;\n\n        return this.each(function() {\n            if($.data(this, ns.data)) {\n                return;\n            }\n\n            // Bind the plugin and attach the instance to data\n            $.data(this, ns.data, new Autocomplete(this, options, selector));\n        });\n    };\n\n    ux.clearCache = function(el) {\n        var $el = el !== undefined ? $(el) : $('.' + utils.getClassname('ready'));\n\n        $el.each(function() {\n            var _instance = $(this).data(ns.data);\n\n            // set cache terms to empty object\n            _instance.terms = {};\n\n            utils.callback(_instance.options.onClearCache);\n        });\n    };\n\n    ux.update = function(el) {\n\n    };\n\n    ux.destroy = function(el) {\n        var $el = el !== undefined ? $(el) : $('.' + utils.getClassname('ready'));\n\n        $el.filter('input').each(function() {\n            var _this = $(this),\n                _instance = _this.data(ns.data),\n                _uxrocket = _this.data(ns.rocket);\n\n            // remove ready class\n            _instance.removeClasses();\n\n            // remove plugin events\n            _instance.unbindUIActions();\n\n            // remove layout\n            _instance.removeLayout();\n\n            // remove plugin data\n            _this.removeData(ns.data);\n\n            // remove uxRocket registry\n            delete _uxrocket[ns.data];\n            _this.data(ns.rocket, _uxrocket);\n\n            utils.callback(_instance.options.onRemove);\n        });\n    };\n\n// version\n    ux.version = '2.0.0';\n\n// default settings\n    ux.settings = defaults;\n    ux.templates = templates;\n    ux.namespace = ns;\n}))\n;\n\n// Old IE polyfill\nObject.keys = Object.keys ||\n              function(o, k, r) {\n                  r = [];\n                  for(k in o) {\n                      r.hasOwnProperty.call(o, k) && r.push(k);\n                  }\n                  return r;\n              };"],"sourceRoot":"/source/"}
>>>>>>> 2.x
