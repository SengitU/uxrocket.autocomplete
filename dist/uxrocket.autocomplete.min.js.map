{"version":3,"sources":["uxrocket.autocomplete.js"],"names":["factory","define","amd","exports","require","jQuery","$","ux","defaults","type","item","service","minLength","queryType","hidden","template","highlight","arrowSelection","arrowNavigation","cache","legacyClass","onReady","onSearch","onSelect","onButtonClick","onClearCache","onUpdate","onRemove","templates","list","image","category","head","tree","events","click","keyup","keys","return","esc","left","up","right","down","ns","prefix","rocket","data","name","wrap","classes","ready","magnify","loading","Autocomplete","el","options","$el","this","setLayout","utils","callback","bindUIActions","setTemplate","prototype","classList","handleClasses","context","className","replace","getClassname","selector","charAt","substr","trim","handleWrapper","parent","is","addClass","addIcon","after","_this","on","e","_length","val","length","onKeyup","console","log","keyCode","fn","apply","func","which","uxrautocomplete","uxitdautocomplete","each","uxrocket","_opts","extend","hasClass","hasWrapper","wrapper","version","settings","Object","o","k","r","hasOwnProperty","call","push"],"mappings":"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","file":"uxrocket.autocomplete.min.js","sourcesContent":["/**\n * UX Rocket\n * jQuery based autocomplete\n * @author Bilal Cinarli\n * @dependency Handlebars\n */\n\n(function(factory) {\n    'use strict';\n    if(typeof define === 'function' && define.amd) {\n        // AMD. Register as an anonymous module.\n        define(['jquery'], factory);\n    } else if(typeof exports === 'object' && typeof require === 'function') {\n        // Browserify\n        factory(require('jquery'));\n    } else {\n        // Browser globals\n        factory(jQuery);\n    }\n}(function($) {\n    'use strict';\n\n    var ux, // local shorthand\n\n        defaults = {\n            type           : 'list',\n            item           : 10,\n            service        : null,\n            minLength      : 2,\n            queryType      : 'GET',\n            hidden         : null,\n            template       : null,\n            highlight      : true,\n            arrowSelection : false,\n            arrowNavigation: true,\n            cache          : false,\n\n            legacyClass: true,\n\n            // callbacks\n            onReady      : false,\n            onSearch     : false,\n            onSelect     : false,\n            onButtonClick: false,\n            onClearCache : false,\n            onUpdate     : false,\n            onRemove     : false\n        },\n        templates = {\n            list    : {\n                item: '' +\n                      '<li class=\"uxr-autocomplete-list-item\">' +\n                      '   <a {{#if url}}href=\"{{url}}\"{{/if}}>' +\n                      '       {{{name}}}' +\n                      '       {{#if title}}' +\n                      '       <br /><em>{{substr title 50}}</em>' +\n                      '       {{/if}}' +\n                      '   </a>' +\n                      '</li>'\n            },\n            image   : {\n                item: '' +\n                      '<li class=\"uxr-autocomplete-list-item\">' +\n                      '   <a {{#if url}}href=\"{{url}}\"{{/if}}>' +\n                      '       <span class=\"item-image\"><img src=\"{{image}}\"/></span> ' +\n                      '       {{{name}}}' +\n                      '       {{#if title}}' +\n                      '       <br /><em>{{substr title 50}}</em>' +\n                      '       {{/if}}' +\n                      '   </a>' +\n                      '</li>'\n            },\n            category: {\n                head: '' +\n                      '<li class=\"uxr-autocomplete-category\">' +\n                      '   <span class=\"uxr-autocomplete-category-head\" title=\"{{category}}\">{{substr category 25}}</span>' +\n                      '</li>',\n                item: '' +\n                      '<li class=\"uxr-autocomplete-list-item\">' +\n                      '   <a {{#if url}}href=\"{{url}}\"{{/if}}>' +\n                      '       {{{name}}}' +\n                      '   </a>' +\n                      '</li>'\n            },\n            tree    : {\n                head: '' +\n                      '<li class=\"uxr-autocomplete-category\">' +\n                      '   <span class=\"uxr-autocomplete-category-head\" title=\"{{category}}\">{{substr category 25}}</span>' +\n                      '</li>',\n                item: '' +\n                      '<li class=\"uxr-autocomplete-list-item\">' +\n                      '   <a {{#if url}}href=\"{{url}}\"{{/if}}>' +\n                      '       <span class=\"item-image\"><img src=\"{{image}}\"/></span> ' +\n                      '       {{{name}}}' +\n                      '   </a>' +\n                      '</li>'\n            }\n        },\n        events = {\n            click: 'click.uxrAutocomplete',\n            keyup: 'keyup.uxrAutocomplete'\n        },\n        keys = {\n            return: 13,\n            esc   : 27,\n            left  : 37,\n            up    : 38,\n            right : 39,\n            down  : 40\n        },\n        ns = {\n            prefix : 'uxr-',\n            rocket : 'uxRocket',\n            data   : 'uxrAutocomplete',\n            name   : 'autocomplete',\n            wrap   : 'uxr-plugin-wrap',\n            classes: {\n                wrap   : 'wrap',\n                ready  : 'ready',\n                magnify: 'magnify',\n                loading: 'loading'\n            }\n        };\n\n    // Constructor Method\n    var Autocomplete = function(el, options) {\n        var $el = $(el);\n\n        this.el = el;\n        this.$el = $el;\n        this.options = options;\n\n        this.setLayout();\n\n        utils.callback(options.onReady);\n\n        this.bindUIActions();\n        this.setTemplate();\n    };\n\n    Autocomplete.prototype = {\n        classList    : '',\n        handleClasses: function() {\n            this.classList = this.$el.context.className.replace(utils.getClassname('ready'), '');\n\n            if(this.options.selector.charAt(0) === '.') {\n                this.classList = this.classList.replace(this.options.selector.substr(1), '');\n            }\n\n            this.classList += ns.wrap + ' ' + utils.getClassname('wrap');\n            this.classList = $.trim(this.classList);\n        },\n\n        handleWrapper: function() {\n            this.$el.parent().is('.' + ns.wrap) ?\n            this.$el.parent().addClass(this.classList) :\n            this.$el.wrap('<span class=\"' + this.classList + '\"></span>');\n        },\n\n        addIcon: function() {\n            this.$el.after('<i class=\"' + utils.getClassname('magnify') + '\"></i>');\n        },\n\n        setLayout: function() {\n            this.handleClasses();\n            this.handleWrapper();\n            this.addIcon();\n        },\n\n        setTemplate: function() {\n            this.template = null;\n\n            if(this.options.template === null) {\n                this.template = templates[this.options.type] || templates.list;\n            }\n            else {\n                this.template = this.options.template;\n            }\n        },\n\n        bindUIActions: function() {\n            var _this = this;\n\n            _this.$el.on(events.keyup, function(e) {\n                var _length = $(this).val().length;\n\n                if(_length >= _this.options.minLength) {\n                    _this.onKeyup(e);\n                }\n            });\n        },\n\n        onKeyup: function(e) {\n            console.log(e);\n\n            if(e.keyCode === keys.return) {\n                console.log(e);\n            }\n\n            utils.callback(this.options.onSearch);\n        }\n    };\n\n    var utils = {\n        callback: function(fn) {\n            // if callback string is function call it directly\n            if(typeof fn === 'function') {\n                fn.apply(this);\n            }\n\n            // if callback defined via data-attribute, call it via new Function\n            else {\n                if(fn !== false) {\n                    var func = function() {\n                        return fn;\n                    };\n                    func();\n                }\n            }\n        },\n\n        getClassname: function(which) {\n            return ns.prefix + ns.name + '-' + ns.classes[which];\n        }\n    };\n\n\n    ux = $.fn.uxrautocomplete = $.fn.uxitdautocomplete = $.uxrautocomplete = function(options) {\n        var selector = this.selector;\n\n        return this.each(function() {\n            var $el = $(this),\n                uxrocket = $el.data(ns.rocket) || {},\n                _opts = $.extend(true, {}, defaults, options, $el.data(), {selector: selector});\n\n            if($el.hasClass(utils.getClassname('ready')) || $el.hasClass(utils.getClassname('wrap'))) {\n                return;\n            }\n\n            $el.addClass(utils.getClassname('ready'));\n\n            uxrocket[ns.data] = {hasWrapper: true, wrapper: ns.wrap, ready: utils.getClassname('ready'), selector: selector, options: _opts};\n\n            $el.data(ns.rocket, uxrocket);\n\n            // Bind the plugin and attach the instance to data\n            $.data(this, ns.data, new Autocomplete(this, _opts));\n        });\n    };\n\n// version\n    ux.version = '2.0.0';\n\n// default settings\n    ux.settings = defaults;\n}))\n;\n\n// Old IE polyfill\nObject.keys = Object.keys ||\n              function(o, k, r) {\n                  r = [];\n                  for(k in o) {\n                      r.hasOwnProperty.call(o, k) && r.push(k);\n                  }\n                  return r;\n              };"],"sourceRoot":"/source/"}