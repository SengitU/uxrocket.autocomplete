{"version":3,"sources":["uxrocket.autocomplete.js"],"names":["factory","define","amd","exports","require","jQuery","$","ux","defaults","type","item","service","minLength","queryType","formdata","serialize","hidden","template","highlight","arrowSelection","arrowNavigation","cache","legacyClass","onReady","onSearch","onSelect","onButtonClick","onClearCache","onUpdate","onRemove","templates","list","image","category","head","tree","events","click","keyup","keys","return","esc","left","up","right","down","ns","prefix","rocket","data","name","wrap","classes","ready","magnify","loading","Autocomplete","el","options","$el","this","setLayout","utils","callback","bindUIActions","setTemplate","prototype","classList","handleClasses","context","className","replace","getClassname","selector","charAt","substr","trim","handleWrapper","parent","is","addClass","addIcon","after","_this","on","e","_length","val","length","onKeyup","console","log","keyCode","update","destroy","fn","apply","func","which","uxrautocomplete","uxitdautocomplete","each","uxrocket","_opts","extend","hasClass","hasWrapper","wrapper","undefined","filter","_instance","_uxrocket","removeClass","off","next","remove","Object","unwrap","removeData","version","settings","namespace","o","k","r","hasOwnProperty","call","push"],"mappings":"CAOC,SAASA,GACN,YACqB,mBAAXC,SAAyBA,OAAOC,IAEtCD,QAAQ,UAAWD,GAGnBA,EAFyB,gBAAZG,UAA2C,kBAAZC,SAEpCA,QAAQ,UAGRC,SAEd,SAASC,GACP,YAEA,IAAIC,GAEAC,GACIC,KAAiB,OACjBC,KAAiB,GACjBC,QAAiB,KACjBC,UAAiB,EACjBC,UAAiB,MACjBC,SAAiB,KACjBC,UAAiB,SACjBC,OAAiB,KACjBC,SAAiB,KACjBC,WAAiB,EACjBC,gBAAiB,EACjBC,iBAAiB,EACjBC,OAAiB,EAEjBC,aAAa,EAGbC,SAAe,EACfC,UAAe,EACfC,UAAe,EACfC,eAAe,EACfC,cAAe,EACfC,UAAe,EACfC,UAAe,GAEnBC,GACIC,MACIrB,KAAM,0LAUVsB,OACItB,KAAM,wPAWVuB,UACIC,KAAM,gJAINxB,KAAM,+GAOVyB,MACID,KAAM,gJAINxB,KAAM,8KASd0B,GACIC,MAAO,wBACPC,MAAO,yBAEXC,GACIC,SAAQ,GACRC,IAAQ,GACRC,KAAQ,GACRC,GAAQ,GACRC,MAAQ,GACRC,KAAQ,IAEZC,GACIC,OAAS,OACTC,OAAS,WACTC,KAAS,kBACTC,KAAS,eACTC,KAAS,kBACTC,SACID,KAAS,OACTE,MAAS,QACTC,QAAS,UACTC,QAAS,YAKjBC,EAAe,SAASC,EAAIC,GAC5B,GAAIC,GAAMrD,EAAEmD,EAEZG,MAAKH,GAAKA,EACVG,KAAKD,IAAMA,EACXC,KAAKF,QAAUA,EAEfE,KAAKC,YAELC,EAAMC,SAASL,EAAQnC,SAEvBqC,KAAKI,gBACLJ,KAAKK,cAGTT,GAAaU,WACTC,UAAe,GACfC,cAAe,WACXR,KAAKO,UAAYP,KAAKD,IAAIU,QAAQC,UAAUC,QAAQT,EAAMU,aAAa,SAAU,IAE1C,MAApCZ,KAAKF,QAAQe,SAASC,OAAO,KAC5Bd,KAAKO,UAAYP,KAAKO,UAAUI,QAAQX,KAAKF,QAAQe,SAASE,OAAO,GAAI,KAG7Ef,KAAKO,WAAarB,EAAGK,KAAO,IAAMW,EAAMU,aAAa,QACrDZ,KAAKO,UAAY7D,EAAEsE,KAAKhB,KAAKO,YAGjCU,cAAe,WACXjB,KAAKD,IAAImB,SAASC,GAAG,IAAMjC,EAAGK,MAC9BS,KAAKD,IAAImB,SAASE,SAASpB,KAAKO,WAChCP,KAAKD,IAAIR,KAAK,gBAAkBS,KAAKO,UAAY,cAGrDc,QAAS,WACLrB,KAAKD,IAAIuB,MAAM,aAAepB,EAAMU,aAAa,WAAa,WAGlEX,UAAW,WACPD,KAAKQ,gBACLR,KAAKiB,gBACLjB,KAAKqB,WAGThB,YAAa,WACTL,KAAK3C,SAAW,KAGZ2C,KAAK3C,SADoB,OAA1B2C,KAAKF,QAAQzC,SACIa,EAAU8B,KAAKF,QAAQjD,OAASqB,EAAUC,KAG1C6B,KAAKF,QAAQzC,UAIrC+C,cAAe,WACX,GAAImB,GAAQvB,IAEZuB,GAAMxB,IAAIyB,GAAGhD,EAAOE,MAAO,SAAS+C,GAChC,GAAIC,GAAUhF,EAAEsD,MAAM2B,MAAMC,MAEzBF,IAAWH,EAAMzB,QAAQ9C,WACxBuE,EAAMM,QAAQJ,MAK1BI,QAAS,SAASJ,GACdK,QAAQC,IAAIN,GAETA,EAAEO,UAAYrD,EAAAA,WACbmD,QAAQC,IAAIN,GAGhBvB,EAAMC,SAASH,KAAKF,QAAQlC,WAGhCqE,OAAQ,WACJ,MAAOtF,GAAGsF,OAAOjC,KAAKH,KAG1BqC,QAAS,WACL,MAAOvF,GAAGuF,QAAQlC,KAAKH,KAI/B,IAAIK,IACAC,SAAU,SAASgC,GAEf,GAAiB,kBAAPA,GACNA,EAAGC,MAAMpC,UAKT,IAAGmC,KAAO,EAAO,CACb,GAAIE,GAAO,WACP,MAAOF,GAEXE,OAKZzB,aAAc,SAAS0B,GACnB,MAAOpD,GAAGC,OAASD,EAAGI,KAAO,IAAMJ,EAAGM,QAAQ8C,IAKtD3F,GAAKD,EAAEyF,GAAGI,gBAAkB7F,EAAEyF,GAAGK,kBAAoB9F,EAAE6F,gBAAkB,SAASzC,GAC9E,GAAIe,GAAWb,KAAKa,QAEpB,OAAOb,MAAKyC,KAAK,WACb,GAAI1C,GAAMrD,EAAEsD,MACR0C,EAAW3C,EAAIV,KAAKH,EAAGE,YACvBuD,EAAQjG,EAAEkG,QAAO,KAAUhG,EAAUkD,EAASC,EAAIV,QAASwB,SAAUA,GAEtEd,GAAI8C,SAAS3C,EAAMU,aAAa,WAAab,EAAI8C,SAAS3C,EAAMU,aAAa,WAIhFb,EAAIqB,SAASlB,EAAMU,aAAa,UAEhC8B,EAASxD,EAAGG,OAASyD,YAAY,EAAMC,QAAS7D,EAAGK,KAAME,MAAOS,EAAMU,aAAa,SAAUC,SAAUA,EAAUf,QAAS6C,GAE1H5C,EAAIV,KAAKH,EAAGE,OAAQsD,GAGpBhG,EAAE2C,KAAKW,KAAMd,EAAGG,KAAM,GAAIO,GAAaI,KAAM2C,QAIrDhG,EAAGsF,OAAS,SAASpC,KAIrBlD,EAAGuF,QAAU,SAASrC,GAClB,GAAIE,GAAyBrD,EAAZsG,SAAPnD,EAAqBA,EAAQ,IAAMK,EAAMU,aAAa,SAEhEb,GAAIkD,OAAO,SAASR,KAAK,WACrB,GAAIlB,GAAQ7E,EAAEsD,MACVkD,EAAY3B,EAAMlC,KAAKH,EAAGG,MAC1B8D,EAAY5B,EAAMlC,KAAKH,EAAGE,OAG9BmC,GAAM6B,YAAYlD,EAAMU,aAAa,UAGrCW,EAAM8B,IAAI7E,EAAOC,MAAQ,IAAMD,EAAOE,OAGtC6C,EAAM+B,KAAK,IAAMpD,EAAMU,aAAa,YAAY2C,SAE7CJ,EAAUjE,EAAGG,MAAMyD,aACfU,OAAO7E,MAA0C,IAAlC6E,OAAO7E,KAAKwE,GAAWvB,OACrCL,EAAMkC,SAINlC,EAAML,SAASkC,YAAYlE,EAAGK,OAKtCgC,EAAMmC,WAAWxE,EAAGG,YAGb8D,GAAUjE,EAAGG,MACpBkC,EAAMlC,KAAKH,EAAGE,OAAQ+D,GAEtBjD,EAAMC,SAAS+C,EAAUpD,QAAQ7B,aAKzCtB,EAAGgH,QAAU,QAGbhH,EAAGiH,SAAWhH,EACdD,EAAGuB,UAAYA,EACfvB,EAAGkH,UAAY3E,IAKnBsE,OAAO7E,KAAO6E,OAAO7E,MACP,SAASmF,EAAGC,EAAGC,GACXA,IACA,KAAID,IAAKD,GACLE,EAAEC,eAAeC,KAAKJ,EAAGC,IAAMC,EAAEG,KAAKJ,EAE1C,OAAOC","file":"uxrocket.autocomplete.min.js","sourcesContent":["/**\n * UX Rocket\n * jQuery based autocomplete\n * @author Bilal Cinarli\n * @dependency Handlebars\n */\n\n(function(factory) {\n    'use strict';\n    if(typeof define === 'function' && define.amd) {\n        // AMD. Register as an anonymous module.\n        define(['jquery'], factory);\n    } else if(typeof exports === 'object' && typeof require === 'function') {\n        // Browserify\n        factory(require('jquery'));\n    } else {\n        // Browser globals\n        factory(jQuery);\n    }\n}(function($) {\n    'use strict';\n\n    var ux, // local shorthand\n\n        defaults = {\n            type           : 'list',\n            item           : 10,\n            service        : null,\n            minLength      : 2,\n            queryType      : 'GET',\n            formdata       : null,\n            serialize      : 'String',\n            hidden         : null,\n            template       : null,\n            highlight      : true,\n            arrowSelection : false,\n            arrowNavigation: true,\n            cache          : false,\n\n            legacyClass: true,\n\n            // callbacks\n            onReady      : false,\n            onSearch     : false,\n            onSelect     : false,\n            onButtonClick: false,\n            onClearCache : false,\n            onUpdate     : false,\n            onRemove     : false\n        },\n        templates = {\n            list    : {\n                item: '' +\n                      '<li class=\"uxr-autocomplete-list-item\">' +\n                      '   <a {{#if url}}href=\"{{url}}\"{{/if}}>' +\n                      '       {{{name}}}' +\n                      '       {{#if title}}' +\n                      '       <br /><em>{{substr title 50}}</em>' +\n                      '       {{/if}}' +\n                      '   </a>' +\n                      '</li>'\n            },\n            image   : {\n                item: '' +\n                      '<li class=\"uxr-autocomplete-list-item\">' +\n                      '   <a {{#if url}}href=\"{{url}}\"{{/if}}>' +\n                      '       <span class=\"item-image\"><img src=\"{{image}}\"/></span> ' +\n                      '       {{{name}}}' +\n                      '       {{#if title}}' +\n                      '       <br /><em>{{substr title 50}}</em>' +\n                      '       {{/if}}' +\n                      '   </a>' +\n                      '</li>'\n            },\n            category: {\n                head: '' +\n                      '<li class=\"uxr-autocomplete-category\">' +\n                      '   <span class=\"uxr-autocomplete-category-head\" title=\"{{category}}\">{{substr category 25}}</span>' +\n                      '</li>',\n                item: '' +\n                      '<li class=\"uxr-autocomplete-list-item\">' +\n                      '   <a {{#if url}}href=\"{{url}}\"{{/if}}>' +\n                      '       {{{name}}}' +\n                      '   </a>' +\n                      '</li>'\n            },\n            tree    : {\n                head: '' +\n                      '<li class=\"uxr-autocomplete-category\">' +\n                      '   <span class=\"uxr-autocomplete-category-head\" title=\"{{category}}\">{{substr category 25}}</span>' +\n                      '</li>',\n                item: '' +\n                      '<li class=\"uxr-autocomplete-list-item\">' +\n                      '   <a {{#if url}}href=\"{{url}}\"{{/if}}>' +\n                      '       <span class=\"item-image\"><img src=\"{{image}}\"/></span> ' +\n                      '       {{{name}}}' +\n                      '   </a>' +\n                      '</li>'\n            }\n        },\n        events = {\n            click: 'click.uxrAutocomplete',\n            keyup: 'keyup.uxrAutocomplete'\n        },\n        keys = {\n            return: 13,\n            esc   : 27,\n            left  : 37,\n            up    : 38,\n            right : 39,\n            down  : 40\n        },\n        ns = {\n            prefix : 'uxr-',\n            rocket : 'uxRocket',\n            data   : 'uxrAutocomplete',\n            name   : 'autocomplete',\n            wrap   : 'uxr-plugin-wrap',\n            classes: {\n                wrap   : 'wrap',\n                ready  : 'ready',\n                magnify: 'magnify',\n                loading: 'loading'\n            }\n        };\n\n    // Constructor Method\n    var Autocomplete = function(el, options) {\n        var $el = $(el);\n\n        this.el = el;\n        this.$el = $el;\n        this.options = options;\n\n        this.setLayout();\n\n        utils.callback(options.onReady);\n\n        this.bindUIActions();\n        this.setTemplate();\n    };\n\n    Autocomplete.prototype = {\n        classList    : '',\n        handleClasses: function() {\n            this.classList = this.$el.context.className.replace(utils.getClassname('ready'), '');\n\n            if(this.options.selector.charAt(0) === '.') {\n                this.classList = this.classList.replace(this.options.selector.substr(1), '');\n            }\n\n            this.classList += ns.wrap + ' ' + utils.getClassname('wrap');\n            this.classList = $.trim(this.classList);\n        },\n\n        handleWrapper: function() {\n            this.$el.parent().is('.' + ns.wrap) ?\n            this.$el.parent().addClass(this.classList) :\n            this.$el.wrap('<span class=\"' + this.classList + '\"></span>');\n        },\n\n        addIcon: function() {\n            this.$el.after('<i class=\"' + utils.getClassname('magnify') + '\"></i>');\n        },\n\n        setLayout: function() {\n            this.handleClasses();\n            this.handleWrapper();\n            this.addIcon();\n        },\n\n        setTemplate: function() {\n            this.template = null;\n\n            if(this.options.template === null) {\n                this.template = templates[this.options.type] || templates.list;\n            }\n            else {\n                this.template = this.options.template;\n            }\n        },\n\n        bindUIActions: function() {\n            var _this = this;\n\n            _this.$el.on(events.keyup, function(e) {\n                var _length = $(this).val().length;\n\n                if(_length >= _this.options.minLength) {\n                    _this.onKeyup(e);\n                }\n            });\n        },\n\n        onKeyup: function(e) {\n            console.log(e);\n\n            if(e.keyCode === keys.return) {\n                console.log(e);\n            }\n\n            utils.callback(this.options.onSearch);\n        },\n\n        update: function() {\n            return ux.update(this.el);\n        },\n\n        destroy: function() {\n            return ux.destroy(this.el);\n        }\n    };\n\n    var utils = {\n        callback: function(fn) {\n            // if callback string is function call it directly\n            if(typeof fn === 'function') {\n                fn.apply(this);\n            }\n\n            // if callback defined via data-attribute, call it via new Function\n            else {\n                if(fn !== false) {\n                    var func = function() {\n                        return fn;\n                    };\n                    func();\n                }\n            }\n        },\n\n        getClassname: function(which) {\n            return ns.prefix + ns.name + '-' + ns.classes[which];\n        }\n    };\n\n\n    ux = $.fn.uxrautocomplete = $.fn.uxitdautocomplete = $.uxrautocomplete = function(options) {\n        var selector = this.selector;\n\n        return this.each(function() {\n            var $el = $(this),\n                uxrocket = $el.data(ns.rocket) || {},\n                _opts = $.extend(true, {}, defaults, options, $el.data(), {selector: selector});\n\n            if($el.hasClass(utils.getClassname('ready')) || $el.hasClass(utils.getClassname('wrap'))) {\n                return;\n            }\n\n            $el.addClass(utils.getClassname('ready'));\n\n            uxrocket[ns.data] = {hasWrapper: true, wrapper: ns.wrap, ready: utils.getClassname('ready'), selector: selector, options: _opts};\n\n            $el.data(ns.rocket, uxrocket);\n\n            // Bind the plugin and attach the instance to data\n            $.data(this, ns.data, new Autocomplete(this, _opts));\n        });\n    };\n\n    ux.update = function(el) {\n\n    };\n\n    ux.destroy = function(el) {\n        var $el = el !== undefined ? $(el) : $('.' + utils.getClassname('ready'));\n\n        $el.filter('input').each(function() {\n            var _this = $(this),\n                _instance = _this.data(ns.data),\n                _uxrocket = _this.data(ns.rocket);\n\n            // remove ready class\n            _this.removeClass(utils.getClassname('ready'));\n\n            // remove plugin events\n            _this.off(events.click + ' ' + events.keyup);\n\n            // remove icon and wrapper\n            _this.next('.' + utils.getClassname('magnify')).remove();\n\n            if(_uxrocket[ns.data].hasWrapper) {\n                if(Object.keys && Object.keys(_uxrocket).length === 1) {\n                    _this.unwrap();\n                }\n\n                else {\n                    _this.parent().removeClass(ns.wrap);\n                }\n            }\n\n            // remove plugin data\n            _this.removeData(ns.data);\n\n            // remove uxRocket registry\n            delete _uxrocket[ns.data];\n            _this.data(ns.rocket, _uxrocket);\n\n            utils.callback(_instance.options.onRemove);\n        });\n    };\n\n// version\n    ux.version = '2.0.0';\n\n// default settings\n    ux.settings = defaults;\n    ux.templates = templates;\n    ux.namespace = ns;\n}))\n;\n\n// Old IE polyfill\nObject.keys = Object.keys ||\n              function(o, k, r) {\n                  r = [];\n                  for(k in o) {\n                      r.hasOwnProperty.call(o, k) && r.push(k);\n                  }\n                  return r;\n              };"],"sourceRoot":"/source/"}