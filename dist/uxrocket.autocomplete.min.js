/*! UX Rocket Autocomplete 
 *  UX Rocket Autocomplete: A jQueryUI autocomplete wrapper 
 *  @author Bilal Cinarli <bcinarli@gmail.com> (http://bcinarli.com/) 
 *  @version 2.0.0 
<<<<<<< HEAD
 *  @build 2015-07-02 
 */
!function($){var ux,defaults={type:"list",item:10,service:null,minLength:2,formdata:null,categoryTextLimit:25,queryType:"GET",hidden:null,template:null,highlight:!0,arrowSelection:!1,arrowNavigation:!0,cache:!1,onReady:!1,onSelect:!1,onButtonClick:!1,onClearCache:!1,onUpdate:!1,onRemove:!1},templates={list:{wrap:"<ul></ul>",item:'<li>   <a {{#if url}}href="{{url}}"{{/if}}>       {{{name}}}       {{#if title}}       <br /><em>{{substr title 50}}</em>       {{/if}}   </a></li>'},image:{wrap:"<ul></ul>",item:'<li>   <a {{#if url}}href="{{url}}"{{/if}}>       <span class="item-image"><img src="{{image}}"/></span>        {{{name}}}       {{#if title}}       <br /><em>{{substr title 50}}</em>       {{/if}}   </a></li>'},category:{wrap:"<ul></ul>",head:'<li class="uxitd-autocomplete-category ui-autocomplete-category">   <span class="uxitd-category-head" title="{{category}}">{{substr category 25}}</span></li>',item:'<li>   <a {{#if url}}href="{{url}}"{{/if}}>       {{{name}}}       {{#if title}}       <br /><em>{{substr title 50}}</em>       {{/if}}   </a></li>'},tree:{wrap:"<ul></ul>",head:'<li class="uxitd-autocomplete-category ui-autocomplete-category">   <span class="uxitd-category-head" title="{{category}}">{{substr category 25}}</span></li>',item:'<li>   <a {{#if url}}href="{{url}}"{{/if}}>       <span class="item-image"><img src="{{image}}"/></span>        {{{name}}}       {{#if title}}       <br /><em>{{substr title 50}}</em>       {{/if}}   </a></li>'}},events={click:"click.uxAutocomplete",search:"autocompletesearch.uxAutocomplete",response:"autocompleteresponse.uxAutocomplete"},ns={rocket:"uxRocket",data:"uxAutocomplete",ready:"uxitd-autocomplete-ready",rocketWrap:"uxitd-plugin-wrap",wrap:"uxitd-autocomplete-wrap",icon:"icon-search",loading:"icon-loading"},AutoComplete=function(e,t,a){var s=$(e),o=$.extend({},defaults,t,s.data(),{selector:a});o.terms={},s.data(ns.data,o),setLayout(s),callback(o.onReady),bindUIActions(s),setTemplate(s)},setLayout=function(e){var t,a=e.data(ns.data);t=" "+e.context.className.replace(ns.ready,""),"."==a.selector.charAt(0)&&(t=t.replace(" "+a.selector.substr(1),""),t=t.replace(a.selector.substr(1)+" ","")),e.parent().is("."+ns.rocketWrap)?e.parent().addClass(ns.wrap+t+" group"):e.wrap('<span class="'+ns.rocketWrap+" "+ns.wrap+t+' group"></span>'),e.after('<i class="'+ns.icon+'"></i>')},setSource=function($el){var _opts=$el.data(ns.data),fdata=null,url_pattern=/^(http|https|\/|\.\/|\.\.\/)/,source=_opts.service,sourceFunction;if(url_pattern.test(source)&&"object"!=typeof source)sourceFunction=function(e,t){var a=e.term;if($el.is(":focus")){if(_opts.cache&&a in _opts.terms){var s=_opts.terms[a].itemList||_opts.terms[a];return void t($.map(s.slice(0,_opts.item),function(e){return setItem(e)}))}null!=_opts.formdata&&(fdata=$(_opts.formdata).serialize()),$.ajax({url:source,dataType:"json",type:_opts.queryType,data:{type:_opts.type,term:a,formdata:fdata},success:function(e){_opts.cache&&(_opts.terms[a]=e,$el.data(ns.data,_opts));var s=e.itemList||e;t($.map(s.slice(0,_opts.item),function(e){return setItem(e)}))}})}};else{"string"==typeof source&&(source=eval(source));var items=source.itemList||source;sourceFunction=function(e,t){if($el.is(":focus")){var a=new RegExp($.ui.autocomplete.escapeRegex(e.term),"i");t($.map(items,function(e){return a.test(e.name)?setItem(e):void 0}))}}}return sourceFunction},bindUIActions=function($el){var _opts=$el.data(ns.data);if("undefined"!=typeof _opts.props&&""!=_opts.props){var props=_opts.props.split(":");$el.next("."+ns.icon).addClass("uxitd-autocomplete-icon-clickable").on(events.click,function(e){e.preventDefault(),eval(props[1])})}_opts.onButtonClick!==!1&&$el.next("."+ns.icon).on(events.click,function(){callback(_opts.onButtonClick)}),$el.on(events.search,function(e,t){$(this).siblings("."+ns.icon).addClass(ns.loading)}),$el.on(events.response,function(e,t){$(this).siblings("."+ns.loading).removeClass(ns.loading)}),$el.autocomplete({open:function(e,t){$(".uxitd-autocomplete-category").removeClass("ui-menu-item"),$(this).autocomplete("widget").css({width:$(this).outerWidth()+"px"})},minLength:_opts.minLength,source:setSource($el),focus:function(e,t){_opts.arrowNavigation||e.preventDefault()},select:function(e,t){if(null!=_opts.hidden&&$(_opts.hidden).val(t.item.id),_opts.arrowSelection===!0&&13==e.keyCode&&"undefined"!=typeof t.item.url){var a=$("#"+e.currentTarget.id).find(".ui-state-focus a").attr("target");"_blank"==a?window.open(t.item.url):window.location=t.item.url}callback(_opts.onSelect)}})},setTemplate=function(e){var t=e.data(e.data("uiAutocomplete")?"uiAutocomplete":"ui-autocomplete"),a=e.data(ns.data),s={};if(null===a.template)switch(a.type){default:case"list":s=templates.list;break;case"image":s=templates.image;break;case"category":s=templates.category;break;case"tree":s=templates.tree}else s=a.template;t._renderMenu=function(e,t){var o=this,n=[],i="";$.each(t,function(t,r){var c;if(("category"==a.type||"tree"==a.type)&&"undefined"!=typeof r.category&&r.category!=i){var l=Handlebars.compile(s.head)(r);n.push(l),i=r.category}c=o._renderItemData(e,r),n.push(c)}),e.append(n),""!=i&&e.addClass("uxitd-category")},t._create=function(){var e=this;e._super(),e.widget().menu("option","items","> :not(.ui-autocomplete-category)")},t._renderItemData=function(e,t){var o,n=Handlebars.compile(s.item)(t);return o=n,a.highlight===!0&&(o=n.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+$.ui.autocomplete.escapeRegex(this.term)+")(?![^<>]*>)(?![^&;]+;)","gi"),'<span class="matched">$1</span>')),$(o).addClass("ui-menu-item").data("ui-autocomplete-item",t).attr("role","presentation")}},setItem=function(e){return"undefined"==typeof e.value&&(e.value=e.name),"undefined"!=typeof e.visiblename&&(e.value=e.visiblename),e},callback=function(e){if("function"==typeof e)e.apply(this);else if(e!==!1){var t=new Function("return "+e);t()}};ux=$.fn.uxitdautocomplete=$.uxautocomplete=function(e){var t=this.selector;return this.each(function(){var a,s=$(this),o=s.data("uxRocket")||{};s.hasClass(ns.ready)||s.hasClass(ns.rocketWrap)||(s.addClass(ns.ready),o[ns.data]={hasWrapper:!0,wrapper:ns.wrap,ready:ns.ready,selector:t,options:e},s.data(ns.rocket,o),a=new AutoComplete(this,e,t))})},ux.clearCache=function(e){var t=$(void 0!==e?e:"."+ns.ready);t.filter("input").each(function(){var e=$(this),t=e.data(ns.data);t.terms={},e.data(ns.data,t),callback(t.onClearCache)})},ux.update=function(e){var t=$(void 0!==e?e:"."+ns.ready);t.filter("input").each(function(){var e=$(this),t=e.data(ns.data),a=e.data(ns.rocket);e.autocomplete("destroy"),e.removeData(ns.data),t=$.extend({},defaults,a[ns.data].options,$(this).data()),e.data(ns.data,t),e.off(events.click+" "+events.search+" "+events.response),bindUIActions(e),setTemplate(e),callback(t.onUpdate)})},ux.remove=function(e){var t=$(void 0!==e?e:"."+ns.ready);t.filter("input").each(function(){var e=$(this),t=e.data(ns.data),a=e.data(ns.rocket);e.removeClass(ns.ready),e.off(events.click+" "+events.search+" "+events.response),e.next("."+ns.icon).remove(),a[ns.data].hasWrapper&&(Object.keys&&1==Object.keys(a).length?e.unwrap():e.parent().removeClass(ns.wrap)),e.removeData(ns.data),delete a[ns.data],e.data(ns.rocket,a),e.autocomplete("destroy"),callback(t.onRemove)})},ux.version="1.8.1",ux.settings=defaults}(jQuery);
=======
 *  @build 2015-07-04 
 */
!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports&&"function"==typeof require?require("jquery"):jQuery)}(function(t){"use strict";var e,s=1,i="uxrAutocomplete",a={type:"list",item:10,service:null,minLength:2,queryType:"GET",formdata:null,hidden:null,template:null,highlight:!0,arrowSelection:!1,arrowNavigation:!0,cache:!1,onReady:!1,onSearch:!1,onSelect:!1,onEnter:!1,onButtonClick:!1,onClearCache:!1,onUpdate:!1,onRemove:!1},n={list:{item:'<li class="uxr-autocomplete-list-item">   <a {{#if url}}href="{{url}}"{{/if}}>       {{{name}}}       {{#if title}}       <br /><em>{{substr title 50}}</em>       {{/if}}   </a></li>'},image:{item:'<li class="uxr-autocomplete-list-item">   <a {{#if url}}href="{{url}}"{{/if}}>       <span class="item-image"><img src="{{image}}"/></span>        {{{name}}}       {{#if title}}       <br /><em>{{substr title 50}}</em>       {{/if}}   </a></li>'},category:{head:'<li class="uxr-autocomplete-category">   <span class="uxr-autocomplete-category-head" title="{{category}}">{{substr category 25}}</span></li>',item:'<li class="uxr-autocomplete-list-item">   <a {{#if url}}href="{{url}}"{{/if}}>       {{{name}}}   </a></li>'},tree:{head:'<li class="uxr-autocomplete-category">   <span class="uxr-autocomplete-category-head" title="{{category}}">{{substr category 25}}</span></li>',item:'<li class="uxr-autocomplete-list-item">   <a {{#if url}}href="{{url}}"{{/if}}>       <span class="item-image"><img src="{{image}}"/></span>        {{{name}}}   </a></li>'}},o={click:"click."+i,keyup:"keyup."+i,blur:"blur."+i},r={codes:{13:"return",27:"esc",37:"left",38:"up",39:"right",40:"down"},"return":13,esc:27,left:37,up:38,right:39,down:40},l={prefix:"uxr-",rocket:"uxRocket",data:i,name:"autocomplete",wrap:"uxr-plugin-wrap",classes:{wrap:"wrap",ready:"ready",magnify:"magnify",loading:"loading",select:"select",category:"category",option:"option",matched:"matched",highlight:"highlight",selected:"selected"}},c=function(e,n,o){var r=t(e);this._instance=s,this._name=i,this._defaults=a,this.el=e,this.$el=r,this.id="uxr-autocomplete-select-"+s,this.selector=o,this.terms={},this.options=t.extend(!0,{},a,n,r.data()),s++,this.lastTerm="as",this.init()};t.extend(c.prototype,{init:function(){var t=this.$el.data(l.rocket)||{};this.$el.addClass(h.getClassname("ready")),t[l.data]={hasWrapper:!0,wrapper:l.wrap,ready:h.getClassname("ready"),selector:this.selector,options:this.options},this.$el.data(l.rocket,t),this.setLayout(),this.prepareContainer(),this.prepareSource(),h.callback(this.options.onReady),this.bindUIActions(),this.setTemplate()},handleClasses:function(){this.classList=this.$el.context.className.replace(h.getClassname("ready"),""),"."===this.selector.charAt(0)&&(this.classList=this.classList.replace(this.selector.substr(1),"")),this.classList+=l.wrap+" "+h.getClassname("wrap"),this.classList=t.trim(this.classList)},removeClasses:function(){this.$el.removeClass(h.getClassname("ready")),this.$el.parent().removeClass(this.classList.replace(l.wrap,""))},handleWrapper:function(){this.$el.parent().is("."+l.wrap)?this.$el.parent().addClass(this.classList):this.$el.wrap('<span class="'+this.classList+'"></span>')},addIcon:function(){this.$el.after('<i class="'+h.getClassname("magnify")+'"></i>'),this.$icon=this.$el.next("."+h.getClassname("magnify"))},setLayout:function(){this.handleClasses(),this.handleWrapper(),this.addIcon()},startLoading:function(){this.$icon.addClass(h.getClassname("loading"))},stopLoading:function(){this.$icon.removeClass(h.getClassname("loading"))},removeLayout:function(){var t=this,e=t.$el.data(l.rocket);Object.keys&&1===Object.keys(e).length?t.$el.unwrap():t.$el.parent().removeClass(l.wrap),t.$el.next("."+h.getClassname("magnify")).remove()},setTemplate:function(){this.template=null,this.template=null===this.options.template?n[this.options.type]||n.list:this.options.template},bindUIActions:function(){var e=this;e.$el.on(o.keyup,function(s){var i=t(this).val(),a=i.length;a>=e.options.minLength&&e.onKeyup(s),0===a&&e.hideContainer()}),e.$el.on(o.blur,function(){e.onBlur()}),e.$list.on(o.click,"."+h.getClassname("option"),function(t){t.preventDefault(),e.select(t)})},select:function(e){var s=e instanceof jQuery?e:t(e.currentTarget);s.siblings().removeClass(h.getClassname("selected")).end().addClass(h.getClassname("selected")),this.setValue(s),this.hideContainer(),h.callback(this.options.onSelect)},setValue:function(t){var e=t.text().trim();""===e&&(e=this.lastTerm),this.$el.val(e)},unbindUIActions:function(){this.$el.off("."+i)},onKeyup:function(t){t.keyCode===r.up||t.keyCode===r.down?this.onVerticalArrow(r.codes[t.keyCode]):t.keyCode===r["return"]?this.$list.is(":visible")&&this.select(this.$list.find("."+h.getClassname("highlight"))):t.keyCode===r.esc?this.hideContainer():(this.lastTerm=this.$el.val().toLowerCase(),this.search())},onBlur:function(){var t=this;setTimeout(function(){t.hideContainer()},150)},onVerticalArrow:function(t){var e,s="up"===t?"prev":"next",i=this.$list.find("."+h.getClassname("highlight"));!this.$list.is(":visible")&&this.lastTerm.length>=this.options.minLength&&this.$list.show(),e=i.length?i.removeClass(h.getClassname("highlight"))[s]().addClass(h.getClassname("highlight")):this.$list.find("."+h.getClassname("option")).first().addClass(h.getClassname("highlight")),this.setValue(e)},prepareContainer:function(){var e=t("<ul></ul>");this.setPosition(e),e.attr("id",this.id).addClass(h.getClassname("select")).css("display","none").appendTo("body"),this.$list=e},prepareSource:function(){var e=this,s=/^(http|https|\/|\.\/|\.\.\/)/,i=this.options.service;this.source=i,"string"==typeof i&&(this.source=s.test(i)?function(){var s=e.serializeForm();t.ajax({url:i,dataType:"json",type:this.options.queryType,data:{term:this.lastTerm,type:this.options.type,formdata:s},success:function(t){var s=t.itemList||t;e.showResults(s)}})}:h.getStringVariable(i))},search:function(){var e,s=this,i=this.source.itemList?this.source.itemList:this.source;return this.startLoading(),this.isCached()?void this.showResults(this.terms[this.lastTerm]):"function"==typeof i?i.apply(this):(e=t.map(i,function(t){return s.searchArray(t,s.lastTerm)?t:void 0}),void this.showResults(e))},searchArray:function(t,e){return t.name.toLowerCase().indexOf(e)>-1},showResults:function(e){var s=this.compileTemplate(e);h.callback(this.options.onSearch),this.cache(e),t("#"+this.id).html(s).show(),this.stopLoading()},setPosition:function(t){var e=this.$el.offset(),s=e.top+this.el.offsetHeight,i=e.left,a=this.el.offsetWidth;return t.css({top:s,left:i,minWidth:a})},hideContainer:function(){t("#"+this.id).delay(100).hide()},compileTemplate:function(e){var s=this,i=[],a=Handlebars.compile(this.template.item),n=this.template.head?Handlebars.compile(this.template.head):!1,o="";return t.each(e,function(e,r){var l;if(l=s.renderItem(r,a),("category"===s.options.type||"tree"===s.options.type)&&"undefined"!=typeof r.category&&r.category!==o){var c=t(n(r));c.addClass(h.getClassname("category")).attr("role","presentation"),i.push(c),o=r.category}i.push(l)}),i},renderItem:function(e,s){var i=this,a=s(e);return i.options.highlight===!0&&(a=a.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+i.lastTerm+")(?![^<>]*>)(?![^&;]+;)","gi"),'<span class="'+h.getClassname("matched")+'">$1</span>')),t(a).addClass(h.getClassname("option")).data("uxrAutocompleteItem",e).attr("role","presentation")},serializeForm:function(){return t(this.options.formdata).serialize()},cache:function(t){this.options.cache===!0&&(this.terms[this.lastTerm]=t)},isCached:function(){var t=!1;return void 0!==this.terms[this.lastTerm]&&(t=!0),t},clearCache:function(){return e.clearCache(this.el)},update:function(){return e.update(this.el)},destroy:function(){return e.destroy(this.el)}});var h={callback:function(t){if("function"==typeof t)t.apply(this);else if(t!==!1){var e=function(){return t};e()}},getStringVariable:function(t){var e;if(t.indexOf(".")>-1){for(var s=t.split("."),i=window[s[0]],a=1;a<s.length;a++)i=i[s[a]];e=i}else e=window[t];return e},getClassname:function(t){return l.prefix+l.name+"-"+l.classes[t]}};e=t.fn.uxrautocomplete=t.fn.uxitdautocomplete=t.uxrautocomplete=function(e){var s=this.selector;return this.each(function(){t.data(this,l.data)||t.data(this,l.data,new c(this,e,s))})},e.clearCache=function(e){var s=t(void 0!==e?e:"."+h.getClassname("ready"));s.each(function(){var e=t(this).data(l.data);e.terms={},h.callback(e.options.onClearCache)})},e.update=function(t){},e.destroy=function(e){var s=t(void 0!==e?e:"."+h.getClassname("ready"));s.filter("input").each(function(){var e=t(this),s=e.data(l.data),i=e.data(l.rocket);s.removeClasses(),s.unbindUIActions(),s.removeLayout(),e.removeData(l.data),delete i[l.data],e.data(l.rocket,i),h.callback(s.options.onRemove)})},e.version="2.0.0",e.settings=a,e.templates=n,e.namespace=l}),Object.keys=Object.keys||function(t,e,s){s=[];for(e in t)s.hasOwnProperty.call(t,e)&&s.push(e);return s};
>>>>>>> 2.x
//# sourceMappingURL=uxrocket.autocomplete.min.js.map