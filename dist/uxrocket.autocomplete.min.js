/*! UX Rocket Autocomplete 
 *  UX Rocket Autocomplete: A jQueryUI autocomplete wrapper 
 *  @author Bilal Cinarli <bcinarli@gmail.com> (http://bcinarli.com/) 
 *  @version 2.0.0 
 *  @build 2015-07-03 
 */
!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports&&"function"==typeof require?require("jquery"):jQuery)}(function(t){"use strict";var e,s="uxrAutocomplete",a={type:"list",item:10,service:null,minLength:2,queryType:"GET",formdata:null,hidden:null,template:null,highlight:!0,arrowSelection:!1,arrowNavigation:!0,cache:!1,onReady:!1,onSearch:!1,onSelect:!1,onButtonClick:!1,onClearCache:!1,onUpdate:!1,onRemove:!1},i={list:{item:'<li class="uxr-autocomplete-list-item">   <a {{#if url}}href="{{url}}"{{/if}}>       {{{name}}}       {{#if title}}       <br /><em>{{substr title 50}}</em>       {{/if}}   </a></li>'},image:{item:'<li class="uxr-autocomplete-list-item">   <a {{#if url}}href="{{url}}"{{/if}}>       <span class="item-image"><img src="{{image}}"/></span>        {{{name}}}       {{#if title}}       <br /><em>{{substr title 50}}</em>       {{/if}}   </a></li>'},category:{head:'<li class="uxr-autocomplete-category">   <span class="uxr-autocomplete-category-head" title="{{category}}">{{substr category 25}}</span></li>',item:'<li class="uxr-autocomplete-list-item">   <a {{#if url}}href="{{url}}"{{/if}}>       {{{name}}}   </a></li>'},tree:{head:'<li class="uxr-autocomplete-category">   <span class="uxr-autocomplete-category-head" title="{{category}}">{{substr category 25}}</span></li>',item:'<li class="uxr-autocomplete-list-item">   <a {{#if url}}href="{{url}}"{{/if}}>       <span class="item-image"><img src="{{image}}"/></span>        {{{name}}}   </a></li>'}},n={click:"click."+s,keyup:"keyup."+s},o={"return":13,esc:27,left:37,up:38,right:39,down:40},r={prefix:"uxr-",rocket:"uxRocket",data:s,name:"autocomplete",wrap:"uxr-plugin-wrap",classes:{wrap:"wrap",ready:"ready",magnify:"magnify",loading:"loading"}},l=function(e,i,n){var o=t(e);this.el=e,this.$el=o,this._name=s,this._defaults=a,this.selector=n,this.options=t.extend(!0,{},a,i,o.data()),this.init()};l.prototype={classList:"",terms:{},init:function(){var t=this.$el.data(r.rocket)||{};this.$el.addClass(c.getClassname("ready")),t[r.data]={hasWrapper:!0,wrapper:r.wrap,ready:c.getClassname("ready"),selector:this.selector,options:this.options},this.$el.data(r.rocket,t),this.setLayout(),this.prepareSource(),c.callback(this.options.onReady),this.bindUIActions(),this.setTemplate()},handleClasses:function(){this.classList=this.$el.context.className.replace(c.getClassname("ready"),""),"."===this.selector.charAt(0)&&(this.classList=this.classList.replace(this.selector.substr(1),"")),this.classList+=r.wrap+" "+c.getClassname("wrap"),this.classList=t.trim(this.classList)},removeClasses:function(){this.$el.removeClass(c.getClassname("ready")),this.$el.parent().removeClass(this.classList.replace(r.wrap,""))},handleWrapper:function(){this.$el.parent().is("."+r.wrap)?this.$el.parent().addClass(this.classList):this.$el.wrap('<span class="'+this.classList+'"></span>')},addIcon:function(){this.$el.after('<i class="'+c.getClassname("magnify")+'"></i>'),this.$icon=this.$el.next("."+c.getClassname("magnify"))},setLayout:function(){this.handleClasses(),this.handleWrapper(),this.addIcon()},startLoading:function(){this.$icon.addClass(c.getClassname("loading"))},stopLoading:function(){this.$icon.removeClass(c.getClassname("loading"))},removeLayout:function(){var t=this,e=t.$el.data(r.rocket);Object.keys&&1===Object.keys(e).length?t.$el.unwrap():t.$el.parent().removeClass(r.wrap),t.$el.next("."+c.getClassname("magnify")).remove()},setTemplate:function(){this.template=null,this.template=null===this.options.template?i[this.options.type]||i.list:this.options.template},bindUIActions:function(){var e=this;e.$el.on(n.keyup,function(s){var a=t(this).val(),i=a.length;e.lastTerm=a.toLowerCase(),i>=e.options.minLength&&e.onKeyup(s)})},unbindUIActions:function(){this.$el.off("."+s)},onKeyup:function(t){console.log(t),t.keyCode===o["return"]&&console.log(t),c.callback(this.options.onSearch)},prepareSource:function(){var e=this,s=/^(http|https|\/|\.\/|\.\.\/)/,a=this.options.service;this.source=a,"string"==typeof a&&(this.source=s.test(a)?function(){var s=e.serializeForm();t.ajax({url:a,dataType:"json",type:this.options.queryType,data:{term:"as",formdata:s},success:function(t){e.options.cache&&(e.terms[e.lastTerm]=t);var s=t.itemList||t;e.showResults(s)}})}:c.getStringVariable(a))},search:function(){{var e,s=this,a=this.source.itemList?this.source.itemList:this.source;this.lastTerm}return this.startLoading(),"function"==typeof a?a.apply(this):(e=t.map(a,function(t){return s.searchArray(t,"as")?t:void 0}),void this.showResults(e))},searchArray:function(t,e){return t.name.toLowerCase().indexOf(e)>-1},showResults:function(t){console.log(t),this.stopLoading()},serializeForm:function(){return t(this.options.formdata).serialize()},update:function(){return e.update(this.el)},destroy:function(){return e.destroy(this.el)}};var c={callback:function(t){if("function"==typeof t)t.apply(this);else if(t!==!1){var e=function(){return t};e()}},getStringVariable:function(t){var e;if(t.indexOf(".")>-1){for(var s=t.split("."),a=window[s[0]],i=1;i<s.length;i++)a=a[s[i]];e=a}else e=window[t];return e},getClassname:function(t){return r.prefix+r.name+"-"+r.classes[t]}};e=t.fn.uxrautocomplete=t.fn.uxitdautocomplete=t.uxrautocomplete=function(e){var s=this.selector;return this.each(function(){t.data(this,r.data)||t.data(this,r.data,new l(this,e,s))})},e.update=function(t){},e.destroy=function(e){var s=t(void 0!==e?e:"."+c.getClassname("ready"));s.filter("input").each(function(){var e=t(this),s=e.data(r.data),a=e.data(r.rocket);s.removeClasses(),s.unbindUIActions(),s.removeLayout(),e.removeData(r.data),delete a[r.data],e.data(r.rocket,a),c.callback(s.options.onRemove)})},e.version="2.0.0",e.settings=a,e.templates=i,e.namespace=r}),Object.keys=Object.keys||function(t,e,s){s=[];for(e in t)s.hasOwnProperty.call(t,e)&&s.push(e);return s};
//# sourceMappingURL=uxrocket.autocomplete.min.js.map