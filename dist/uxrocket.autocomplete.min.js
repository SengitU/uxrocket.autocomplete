/*! UX Rocket Autocomplete 
 *  UX Rocket Autocomplete: A jQueryUI autocomplete wrapper 
 *  @author Bilal Cinarli <bcinarli@gmail.com> (http://bcinarli.com/) 
 *  @version 2.0.0 
 *  @build 2015-07-02 
 */
!function($){var ux,defaults={type:"list",item:10,service:null,minLength:2,formdata:null,categoryTextLimit:25,queryType:"GET",hidden:null,template:null,highlight:!0,arrowSelection:!1,arrowNavigation:!0,cache:!1,onReady:!1,onSelect:!1,onButtonClick:!1,onClearCache:!1,onUpdate:!1,onRemove:!1},templates={list:{wrap:"<ul></ul>",item:'<li>   <a {{#if url}}href="{{url}}"{{/if}}>       {{{name}}}       {{#if title}}       <br /><em>{{substr title 50}}</em>       {{/if}}   </a></li>'},image:{wrap:"<ul></ul>",item:'<li>   <a {{#if url}}href="{{url}}"{{/if}}>       <span class="item-image"><img src="{{image}}"/></span>        {{{name}}}       {{#if title}}       <br /><em>{{substr title 50}}</em>       {{/if}}   </a></li>'},category:{wrap:"<ul></ul>",head:'<li class="uxitd-autocomplete-category ui-autocomplete-category">   <span class="uxitd-category-head" title="{{category}}">{{substr category 25}}</span></li>',item:'<li>   <a {{#if url}}href="{{url}}"{{/if}}>       {{{name}}}       {{#if title}}       <br /><em>{{substr title 50}}</em>       {{/if}}   </a></li>'},tree:{wrap:"<ul></ul>",head:'<li class="uxitd-autocomplete-category ui-autocomplete-category">   <span class="uxitd-category-head" title="{{category}}">{{substr category 25}}</span></li>',item:'<li>   <a {{#if url}}href="{{url}}"{{/if}}>       <span class="item-image"><img src="{{image}}"/></span>        {{{name}}}       {{#if title}}       <br /><em>{{substr title 50}}</em>       {{/if}}   </a></li>'}},events={click:"click.uxAutocomplete",search:"autocompletesearch.uxAutocomplete",response:"autocompleteresponse.uxAutocomplete"},ns={rocket:"uxRocket",data:"uxAutocomplete",ready:"uxitd-autocomplete-ready",rocketWrap:"uxitd-plugin-wrap",wrap:"uxitd-autocomplete-wrap",icon:"icon-search",loading:"icon-loading"},AutoComplete=function(e,t,a){var s=$(e),o=$.extend({},defaults,t,s.data(),{selector:a});o.terms={},s.data(ns.data,o),setLayout(s),callback(o.onReady),bindUIActions(s),setTemplate(s)},setLayout=function(e){var t,a=e.data(ns.data);t=" "+e.context.className.replace(ns.ready,""),"."==a.selector.charAt(0)&&(t=t.replace(" "+a.selector.substr(1),""),t=t.replace(a.selector.substr(1)+" ","")),e.parent().is("."+ns.rocketWrap)?e.parent().addClass(ns.wrap+t+" group"):e.wrap('<span class="'+ns.rocketWrap+" "+ns.wrap+t+' group"></span>'),e.after('<i class="'+ns.icon+'"></i>')},setSource=function($el){var _opts=$el.data(ns.data),fdata=null,url_pattern=/^(http|https|\/|\.\/|\.\.\/)/,source=_opts.service,sourceFunction;if(url_pattern.test(source)&&"object"!=typeof source)sourceFunction=function(e,t){var a=e.term;if($el.is(":focus")){if(_opts.cache&&a in _opts.terms){var s=_opts.terms[a].itemList||_opts.terms[a];return void t($.map(s.slice(0,_opts.item),function(e){return setItem(e)}))}null!=_opts.formdata&&(fdata=$(_opts.formdata).serialize()),$.ajax({url:source,dataType:"json",type:_opts.queryType,data:{type:_opts.type,term:a,formdata:fdata},success:function(e){_opts.cache&&(_opts.terms[a]=e,$el.data(ns.data,_opts));var s=e.itemList||e;t($.map(s.slice(0,_opts.item),function(e){return setItem(e)}))}})}};else{"string"==typeof source&&(source=eval(source));var items=source.itemList||source;sourceFunction=function(e,t){if($el.is(":focus")){var a=new RegExp($.ui.autocomplete.escapeRegex(e.term),"i");t($.map(items,function(e){return a.test(e.name)?setItem(e):void 0}))}}}return sourceFunction},bindUIActions=function($el){var _opts=$el.data(ns.data);if("undefined"!=typeof _opts.props&&""!=_opts.props){var props=_opts.props.split(":");$el.next("."+ns.icon).addClass("uxitd-autocomplete-icon-clickable").on(events.click,function(e){e.preventDefault(),eval(props[1])})}_opts.onButtonClick!==!1&&$el.next("."+ns.icon).on(events.click,function(){callback(_opts.onButtonClick)}),$el.on(events.search,function(e,t){$(this).siblings("."+ns.icon).addClass(ns.loading)}),$el.on(events.response,function(e,t){$(this).siblings("."+ns.loading).removeClass(ns.loading)}),$el.autocomplete({open:function(e,t){$(".uxitd-autocomplete-category").removeClass("ui-menu-item"),$(this).autocomplete("widget").css({width:$(this).outerWidth()+"px"})},minLength:_opts.minLength,source:setSource($el),focus:function(e,t){_opts.arrowNavigation||e.preventDefault()},select:function(e,t){if(null!=_opts.hidden&&$(_opts.hidden).val(t.item.id),_opts.arrowSelection===!0&&13==e.keyCode&&"undefined"!=typeof t.item.url){var a=$("#"+e.currentTarget.id).find(".ui-state-focus a").attr("target");"_blank"==a?window.open(t.item.url):window.location=t.item.url}callback(_opts.onSelect)}})},setTemplate=function(e){var t=e.data(e.data("uiAutocomplete")?"uiAutocomplete":"ui-autocomplete"),a=e.data(ns.data),s={};if(null===a.template)switch(a.type){default:case"list":s=templates.list;break;case"image":s=templates.image;break;case"category":s=templates.category;break;case"tree":s=templates.tree}else s=a.template;t._renderMenu=function(e,t){var o=this,n=[],i="";$.each(t,function(t,r){var c;if(("category"==a.type||"tree"==a.type)&&"undefined"!=typeof r.category&&r.category!=i){var l=Handlebars.compile(s.head)(r);n.push(l),i=r.category}c=o._renderItemData(e,r),n.push(c)}),e.append(n),""!=i&&e.addClass("uxitd-category")},t._create=function(){var e=this;e._super(),e.widget().menu("option","items","> :not(.ui-autocomplete-category)")},t._renderItemData=function(e,t){var o,n=Handlebars.compile(s.item)(t);return o=n,a.highlight===!0&&(o=n.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+$.ui.autocomplete.escapeRegex(this.term)+")(?![^<>]*>)(?![^&;]+;)","gi"),'<span class="matched">$1</span>')),$(o).addClass("ui-menu-item").data("ui-autocomplete-item",t).attr("role","presentation")}},setItem=function(e){return"undefined"==typeof e.value&&(e.value=e.name),"undefined"!=typeof e.visiblename&&(e.value=e.visiblename),e},callback=function(e){if("function"==typeof e)e.apply(this);else if(e!==!1){var t=new Function("return "+e);t()}};ux=$.fn.uxitdautocomplete=$.uxautocomplete=function(e){var t=this.selector;return this.each(function(){var a,s=$(this),o=s.data("uxRocket")||{};s.hasClass(ns.ready)||s.hasClass(ns.rocketWrap)||(s.addClass(ns.ready),o[ns.data]={hasWrapper:!0,wrapper:ns.wrap,ready:ns.ready,selector:t,options:e},s.data(ns.rocket,o),a=new AutoComplete(this,e,t))})},ux.clearCache=function(e){var t=$(void 0!==e?e:"."+ns.ready);t.filter("input").each(function(){var e=$(this),t=e.data(ns.data);t.terms={},e.data(ns.data,t),callback(t.onClearCache)})},ux.update=function(e){var t=$(void 0!==e?e:"."+ns.ready);t.filter("input").each(function(){var e=$(this),t=e.data(ns.data),a=e.data(ns.rocket);e.autocomplete("destroy"),e.removeData(ns.data),t=$.extend({},defaults,a[ns.data].options,$(this).data()),e.data(ns.data,t),e.off(events.click+" "+events.search+" "+events.response),bindUIActions(e),setTemplate(e),callback(t.onUpdate)})},ux.remove=function(e){var t=$(void 0!==e?e:"."+ns.ready);t.filter("input").each(function(){var e=$(this),t=e.data(ns.data),a=e.data(ns.rocket);e.removeClass(ns.ready),e.off(events.click+" "+events.search+" "+events.response),e.next("."+ns.icon).remove(),a[ns.data].hasWrapper&&(Object.keys&&1==Object.keys(a).length?e.unwrap():e.parent().removeClass(ns.wrap)),e.removeData(ns.data),delete a[ns.data],e.data(ns.rocket,a),e.autocomplete("destroy"),callback(t.onRemove)})},ux.version="1.8.3",ux.settings=defaults}(jQuery);
//# sourceMappingURL=uxrocket.autocomplete.min.js.map